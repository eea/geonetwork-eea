<?xml version="1.0" encoding="UTF-8"?>
<!--
  ~ Copyright (C) 2001-2016 Food and Agriculture Organization of the
  ~ United Nations (FAO-UN), United Nations World Food Programme (WFP)
  ~ and United Nations Environment Programme (UNEP)
  ~
  ~ This program is free software; you can redistribute it and/or modify
  ~ it under the terms of the GNU General Public License as published by
  ~ the Free Software Foundation; either version 2 of the License, or (at
  ~ your option) any later version.
  ~
  ~ This program is distributed in the hope that it will be useful, but
  ~ WITHOUT ANY WARRANTY; without even the implied warranty of
  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
  ~ General Public License for more details.
  ~
  ~ You should have received a copy of the GNU General Public License
  ~ along with this program; if not, write to the Free Software
  ~ Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301, USA
  ~
  ~ Contact: Jeroen Ticheler - FAO - Viale delle Terme di Caracalla 2,
  ~ Rome - Italy. email: geonetwork@osgeo.org
  -->

<editor xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:gn="http://www.fao.org/geonetwork"
        xmlns:gco="http://www.isotc211.org/2005/gco"
        xmlns:gmd="http://www.isotc211.org/2005/gmd"
        xmlns:gmx="http://www.isotc211.org/2005/gmx"
        xmlns:srv="http://www.isotc211.org/2005/srv"
        xmlns:gml="http://www.opengis.net/gml/3.2"
        xmlns:xlink="http://www.w3.org/1999/xlink"
        xsi:noNamespaceSchemaLocation="../../../../../../config-editor.xsd">

  <!-- Form field type configuration. Default is text. -->
  <fields>
    <for name="gmd:abstract" use="textarea"/>
    <for name="gmd:checkPointDescription" use="textarea"/>
    <for name="gmd:credit" use="textarea"/>
    <for name="gmd:description" use="textarea"/>
    <for name="gmd:evaluationMethodDescription" use="textarea"/>
    <for name="gmd:explanation" use="textarea"/>
    <for name="gmd:handlingDescription" use="textarea"/>
    <for name="gmd:maintenanceNote" use="textarea"/>
    <for name="gmd:measureDescription" use="textarea"/>
    <for name="gmd:purpose" use="textarea"/>
    <for name="gmd:orderingInstructions" use="textarea"/>
    <for name="gmd:otherConstraints" use="textarea"/>
    <for name="gmd:statement" use="textarea"/>
    <for name="gmd:supplementalInformation" use="textarea"/>
    <for name="gmd:specificUsage" use="textarea"/>
    <for name="gmd:userNote" use="textarea"/>
    <for name="gmd:useLimitation" use="textarea"/>
    <!-- Example configuration to use thesaurus to populate a CharacterString field
    (including multilingual fields).

    eg. INSPIRE codelist to set use limitation. This will apply to all views in the editor
    1) Set the CharacterString value with the concept value
    <for name="gmd:useLimitation"
         use="data-gn-keyword-picker">
      <directiveAttributes data-thesaurus-key="external.theme.httpinspireeceuropaeumetadatacodelistLimitationsOnPublicAccess-LimitationsOnPublicAccess"/>
    </for>

    2) Use the concept Identifier in the xlink:href attribute.
    This will automatically use the appropriate substitute depending on the presence
    or not of the xlink:href. Either a CharacterString or an Anchor is used.
    <for name="gmd:useLimitation"
         use="data-gn-keyword-picker">
      <directiveAttributes data-thesaurus-key="external.theme.httpinspireeceuropaeumetadatacodelistLimitationsOnPublicAccess-LimitationsOnPublicAccess"
                           data-thesaurus-concept-id-attribute="xlinkCOLONhref"/>
    </for>

    3) Use the concept identifier to populate another attribute (not having namespace)
    <for name="gmd:featureTypes"
         use="data-gn-keyword-picker">
      <directiveAttributes data-thesaurus-key="external.theme.httpinspireeceuropaeumetadatacodelistLimitationsOnPublicAccess-LimitationsOnPublicAccess"
                           data-thesaurus-concept-id-attribute="codeSpace"/>
    </for>
    -->

    <!-- Example configuration to use the anchor switcher directive
    <for name="gmd:code" xpath="/gmd:MD_Metadata/gmd:identifier/gmd:MD_Identifier/gmd:code" use="data-gn-anchor-switcher"/>
    <for name="gmd:supplementalInformation" use="data-gn-anchor-switcher"/>
    <for name="gmd:organisationName" use="data-gn-anchor-switcher"/>
    -->

    <!-- Example of data-gn-field-upload-div directive:

    Create a widget to handle editing of Anchor fields, that require to upload files to the metadata and link them.

    Files are stored in the metadata store, the same way as when adding online resources.

    Format of the xml snippet created:

    <gmd:supplementalInformation>
      <gmx:Anchor xlink:href="http://localhost:8080/geonetwork/srv/api/records/cde2f47f-4a3f-4da1-8918-9923e7d372f1/attachments/report2019.docx">
        Report 2019
      </gmx:Anchor>
    </gmd:supplementalInformation>

    The directive doesn't support multilingual fields.

    Parameters:
        data-allow-modify-xlink="true": allows to modify the xlink href (defaults to false)

    <for name="gmd:supplementalInformation" use="data-gn-field-upload-div">
      <directiveAttributes data-allow-modify-xlink="true" data-link-href="eval#gmx:Anchor/@xlink:href" />
    </for>
    -->

    <for name="gts:TM_PeriodDuration" use="data-gn-field-duration-div"/>
    <for name="gml:duration" use="data-gn-field-duration-div"/>

    <for name="gco:Distance" use="number"/>
    <for name="gco:Decimal" use="number"/>
    <for name="gco:Integer" use="number"/>
    <for name="gco:Real" use="number"/>
    <for name="gco:Boolean" use="checkbox"/>

    <!-- Use data-gn-checkbox-with-nilreason for INSPIRE conformity, using xpath attribute.Similar configuration can be
         applied to other boolean fields that require to handle nilreason value.

         And additional change is required in inflate-metadata.xsl, for the elements to handle with this directive to add gco:Boolean
         when missing due to nilreason attribute and work nicely with the metadata editor.

         Example with gmd:pass:

           <xsl:template match="gmd:pass[@gco:nilReason and not(gco:Boolean)]">
            <xsl:copy>
              <xsl:copy-of select="@*" />

              <gco:Boolean></gco:Boolean>
            </xsl:copy>
          </xsl:template>

          Update-fixed-info.xsl already removes gco:Boolean when empty due to nilreason attribute, to avoid xsd errors. No need to change it.
    -->
    <!--<for name="gco:Boolean"
         xpath="/gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:pass"
         use="data-gn-checkbox-with-nilreason">
      <directiveAttributes
        data-tag-name="gmd:pass"
        data-nilreason="eval#@gco:nilReason"
        data-labels='{"true": "conformant", "false": "notConformant", "unknown": "notEvaluated"}'/>
    </for>-->


    <for name="gco:Date" use="data-gn-date-picker"/>
    <for name="gco:DateTime" use="data-gn-date-picker"/>


    <!-- gmx:FileName/@src attribute -->
    <for name="gmx:FileName/@src" use="data-gn-logo-selector"/>

    <for name="gmd:electronicMailAddress" use="email"/>

    <for name="gmd:language" use="data-gn-language-picker"/>
    <for name="gmd:languageCode" use="data-gn-language-picker"/>

    <for name="gmd:country" use="data-gn-country-picker"/>

    <for name="gmd:referenceSystemInfo" addDirective="data-gn-crs-selector"/>


    <!--
    Enable the following to use subtemplates for extent type.
    <for name="gmd:extent" addDirective="data-gn-directory-entry-selector">
      <directiveAttributes
        data-template-add-action="true"
        data-search-action="true"
        data-popup-action="true"
        data-template-type="extent"
        data-filter='{"root": "gmd:EX_Extent"}'
        data-insert-modes=""/>
    </for>

    for formats:
    <for name="gmd:resourceFormat" addDirective="data-gn-directory-entry-selector">
      <directiveAttributes
              data-template-add-action="false"
              data-search-action="true"
              data-popup-action="true"
              data-template-type="format"
              data-filter='{"root": "gmd:MD_Format"}'
              data-insert-modes="xlink"/>
    </for>
    <for name="gmd:distributionFormat" addDirective="data-gn-directory-entry-selector">
      <directiveAttributes
              data-template-add-action="false"
              data-search-action="true"
              data-popup-action="true"
              data-template-type="format"
              data-filter='{"root": "gmd:MD_Format"}'
              data-insert-modes="xlink"/>
    </for>
    -->

    <for name="gmd:contact" addDirective="data-gn-directory-entry-selector">
      <directiveAttributes
        data-template-add-action="true"
        data-search-action="true"
        data-popup-action="true"
        data-template-type="contact"
        data-insert-modes=""
        data-variables="gmd:role/gmd:CI_RoleCode/@codeListValue~{role}"/>
    </for>
    <for name="gmd:pointOfContact" addDirective="data-gn-directory-entry-selector">
      <directiveAttributes
        data-template-add-action="true"
        data-search-action="true"
        data-popup-action="true"
        data-template-type="contact"
        data-insert-modes=""
        data-variables="gmd:role/gmd:CI_RoleCode/@codeListValue~{role}"/>
    </for>
    <for name="gmd:distributorContact" addDirective="data-gn-directory-entry-selector">
      <directiveAttributes
        data-template-add-action="true"
        data-search-action="true"
        data-popup-action="true"
        data-template-type="contact"
        data-insert-modes=""
        data-variables="gmd:role/gmd:CI_RoleCode/@codeListValue~{role}"/>
    </for>
    <for name="gmd:processor" addDirective="data-gn-directory-entry-selector">
      <directiveAttributes
        data-template-add-action="true"
        data-search-action="true"
        data-popup-action="true"
        data-template-type="contact"
        data-insert-modes=""
        data-variables="gmd:role/gmd:CI_RoleCode/@codeListValue~{role}"/>
    </for>
    <for name="gmd:citedResponsibleParty" addDirective="data-gn-directory-entry-selector">
      <directiveAttributes
        data-template-add-action="true"
        data-search-action="true"
        data-popup-action="true"
        data-template-type="contact"
        data-insert-modes=""
        data-variables="gmd:role/gmd:CI_RoleCode/@codeListValue~{role}"/>
    </for>
    <for name="gmd:report" addDirective="data-gn-directory-entry-selector">
      <directiveAttributes
        data-template-add-action="true"
        data-search-action="true"
        data-popup-action="true"
        data-filter='{"root": "gmd:DQ_DomainConsistency"}'
        data-insert-modes=""
        data-template-type="report"/>
    </for>




    <!-- Example configuration: Add onLine source from subtemplate
    <for name="gmd:onLine" addDirective="data-gn-directory-entry-selector">
      <directiveAttributes
              data-template-add-action="true"
              data-template-type="onLine"
              data-filter='{"root": "gmd:CI_OnlineResource"}'/>
    </for>
    -->


    <for name="gmd:descriptiveKeywords" addDirective="data-gn-thesaurus-selector">
      <!--
      Example of configuration to disable free text keywords in the thesaurus selector
      <directiveAttributes data-allow-free-text-keywords="false" />

      To restrict the list of thesaurus allowed, set the include attribute
      for the directive:
      <directiveAttributes data-include="external.theme.httpinspireeceuropaeutheme-theme,external.place.regions"/>

      Exclude a thesaurus:
      <directiveAttributes data-include="-external.place.regions"/>

      Exclude all thesaurus already used in the metadata:
      -->
      <directiveAttributes data-transformation="to-iso19139-keyword"
                           data-include="xpath::string-join(*
                                          //gmd:thesaurusName/*/gmd:identifier/*/
                                            gmd:code/gmx:Anchor/
                                              concat('-', substring-after(text()[. != ''], 'geonetwork.thesaurus.')), ',')"/>
    </for>
  </fields>


  <fieldsWithFieldset>
    <name>gmd:MD_Metadata</name>
    <name>gmd:identificationInfo</name>
    <name>gmd:distributionInfo</name>
    <name>gmd:portrayalCatalogueInfo</name>
    <name>gmd:portrayalCatalogueCitation</name>
    <name>gmd:thesaurusName</name>
    <name>gmd:resourceConstraints</name>
    <name>gmd:spatialRepresentationInfo</name>
    <name>gmd:pointOfContact</name>
    <name>gmd:contact</name>
    <name>gmd:processor</name>
    <name>gmd:userContactInfo</name>
    <name>gmd:resourceSpecificUsage</name>
    <name>gmd:graphicOverview</name>
    <name>gmd:citedResponsibleParty</name>
    <name>gmd:dataQualityInfo</name>
    <name>gmd:contentInfo</name>
    <name>gmd:distributionFormat</name>
    <name>gmd:referenceSystemInfo</name>
    <name>gmd:spatialResolution</name>
    <name>gmd:offLine</name>
    <name>gmd:onLine</name>
    <name>gmd:address</name>
    <name>gmd:projection</name>
    <name>gmd:ellipsoid</name>
    <name>gmd:attributes</name>
    <name>gmd:geographicBox</name>
    <name>gmd:EX_TemporalExtent</name>
    <name>gmd:EX_VerticalExtent</name>
    <name>gmd:MD_Distributor</name>
    <name>srv:containsOperations</name>
    <name>srv:SV_Parameter</name>
    <name>srv:connectPoint</name>
    <name>srv:SV_CoupledResource</name>
    <name>gmd:metadataConstraints</name>
    <name>gmd:aggregationInfo</name>
    <name>gmd:processStep</name>
    <name>gmd:lineage</name>
    <name>gmd:centerPoint</name>
    <name>gml:verticalCS</name>
    <name>gml:verticalDatum</name>
    <name>gmd:axisDimensionProperties</name>
    <name>gmd:identifier</name>
    <name>gmd:topicCategory</name>
  </fieldsWithFieldset>

  <multilingualFields>
    <!-- In multilingual mode, define which mode
    the widget should have. If expanded, then one
    field per language is displayed. -->
    <expanded>
      <name>gmd:title</name>
      <name>gmd:abstract</name>
    </expanded>
    <!-- All fields in ISO could be multilingual.
    Define element to exclude.

      The name element can optionally have ancestor, child or parent attributes to
      further restrict the exclusion.  For example if some gmd:code elements are
      multilingual but others are not then adding a parent/child/parent attribute
      can restrict the exclude to only some elements.

      For example:
        <name ancestor="gmd:thesaurusName">gmd:code</name>
        or
        <name child="gmx:Anchor">gmd:code</name>
    -->
    <exclude>
      <name>gmd:identifier</name>
      <name>gmd:metadataStandardName</name>
      <name>gmd:metadataStandardVersion</name>
      <name>gmd:hierarchyLevelName</name>
      <name>gmd:parentIdentifier</name>
      <name>gmd:dataSetURI</name>
      <name>gmd:postalCode</name>
      <name>gmd:city</name>
      <name>gmd:language</name>
      <name>gmd:administrativeArea</name>
      <name>gmd:voice</name>
      <name>gmd:facsimile</name>
      <name>gmd:dataset</name>
      <name>gmd:other</name>
      <name>gmd:hoursOfService</name>
      <name>gmd:applicationProfile</name>
      <name>gmd:page</name>
      <name>gmd:date</name>
      <name>gmd:linkage</name>
      <name>gmd:fileName</name>
      <name>gmd:protocol</name>
      <name>gmd:fileType</name>
      <name>gmd:unitsOfDistribution</name>
      <name>gmd:amendmentNumber</name>
      <name>gmd:specification</name>
      <name>gmd:fileDecompressionTechnique</name>
      <name>gmd:turnaround</name>
      <name>gmd:fees</name>
      <name>gmd:userDeterminedLimitations</name>
      <name>gmd:codeSpace</name>
      <name>gmd:version</name>
      <name>gmd:edition</name>
      <name>gmd:ISBN</name>
      <name>gmd:ISSN</name>
      <name>gmd:errorStatistic</name>
      <name>gmd:schemaAscii</name>
      <name>gmd:softwareDevelopmentFileFormat</name>
      <name>gmd:shortName</name>
      <name>gmd:condition</name>
      <name>gmd:maximumOccurence</name>
      <name>gmd:domainValue</name>
      <name>gmd:minimumValue</name>
      <name>gmd:maximumValue</name>
      <name>gmd:dimensionSize</name>
      <name>gmd:numberOfDimensions</name>
      <name>gmd:densityUnits</name>
      <name>gmd:descriptor</name>
      <name>gmd:denominator</name>
      <name>gmd:classificationSystem</name>
      <name>gmd:checkPointDescription</name>
      <name>gmd:transformationDimensionDescription</name>
      <name>gmd:orientationParameterDescription</name>
      <name>gmd:userDefinedMaintenanceFrequency</name>
      <name>gmd:distance</name>
      <name>gmd:geometricObjectCount</name>
      <name>srv:name</name>
      <name>srv:invocationName</name>
      <name>srv:serviceTypeVersion</name>
      <name>srv:operationName</name>
      <name>srv:identifier</name>
      <name>srv:serviceType</name>
      <name ancestor="gmd:thesaurusName">gmd:code</name>
      <name ancestor="gmd:aggregateDataSetIdentifier">gmd:code</name>
      <name ancestor="gmd:CI_Citation">gmd:code</name>
    </exclude>
  </multilingualFields>

  <tableFields>
    <table for="gmd:CI_ResponsibleParty">
      <header>
        <!-- TODO: Add label from strings.xml / label with context-->
        <col label="gmd:organisationName"/>
        <col label="gmd:individualName"/>
        <col label="gmd:electronicMailAddress"/>
        <col label="gmd:onlineResource"/>
        <col label="gmd:role"/>
        <col/>
      </header>
      <row>
        <col xpath="gmd:organisationName"/>
        <col xpath="gmd:individualName"/>
        <col xpath="gmd:contactInfo/*/gmd:address/*/gmd:electronicMailAddress"/>
        <col xpath="gmd:contactInfo/*/gmd:onlineResource/*/gmd:linkage"/>
        <col xpath="gmd:role"/>
        <col del=".."/>
      </row>
    </table>
    <table for="gmd:CI_OnlineResource">
      <header>
        <col label="gmd:protocol"/>
        <col label="gmd:linkage"/>
        <col label="gmd:name"/>
        <col/>
      </header>
      <row>
        <col xpath="gmd:protocol"/>
        <col xpath="gmd:linkage"/>
        <col xpath="gmd:name"/>
        <col del=".."/>
      </row>
    </table>
    <table for="srv:SV_OperationMetadata">
      <header>
        <col label="srv:operationName"/>
        <col label="srv:DCP"/>
        <col label="srv:connectPoint"/>
        <col/>
      </header>
      <row>
        <col xpath="srv:operationName"/>
        <col xpath="srv:DCP"/>
        <col xpath="srv:connectPoint/gmd:CI_OnlineResource/gmd:linkage"/>
        <col del=".."/>
        <section xpath="srv:SV_OperationMetadata/srv:parameters"
                 or="parameters" in="srv:SV_OperationMetadata"/>
      </row>
    </table>
    <table for="srv:SV_CoupledResource">
      <header>
        <col label="srv:operationName"/>
        <col label="gco:ScopedName"/>
        <col label="srv:identifier"/>
        <col/>
      </header>
      <row>
        <col xpath="srv:operationName"/>
        <col xpath="gco:ScopedName"/>
        <col xpath="srv:identifier"/>
        <col del=".."/>
      </row>
    </table>
    <!--<table for="gmd:MD_Format">
      <header>
        <col label="gmd:name"/>
        <col label="gmd:version"/>
        <col/>
      </header>
      <row>
        <col xpath="gmd:name"/>
        <col xpath="gmd:version"/>
        <col del=".."/>
      </row>
    </table>-->
    <table for="gmd:PT_Locale">
      <header>
        <col label="gmd:languageCode"/>
        <col label="gmd:characterEncoding"/>
        <col/>
      </header>
      <row>
        <col xpath="gmd:languageCode"/>
        <col xpath="gmd:characterEncoding"/>
        <col del=".."/>
      </row>
    </table>
  </tableFields>

  <!-- View configuration -->
  <views>
    <view name="eea"
          upAndDownControlHidden="true"
          hideTimeInCalendar="true"
          class="gn-indent-colored gn-label-above-input">
      <thesaurusList>
        <thesaurus key="external.theme.httpinspireeceuropaeutheme-theme"
                   fieldset="false"
                   suggestion="true"
                   transformations="to-iso19139-keyword-with-anchor"/>
        <thesaurus key="external.theme.httpinspireeceuropaeumetadatacodelistSpatialDataServiceCategory"
                   fieldset="false"
                   transformations="to-iso19139-keyword-with-anchor"/>
        <thesaurus key="external.theme.httpinspireeceuropaeumetadatacodelistSpatialScope-SpatialScope"
                   fieldset="false"
                   transformations="to-iso19139-keyword-with-anchor"/>
        <thesaurus key="external.theme.gemet"
                   fieldset="false"
                   suggestion="true"
                   transformations="to-iso19139-keyword-with-anchor"/>
        <thesaurus key="external.theme.eea-topics"
                   fieldset="false"
                   suggestion="true"
                   transformations="to-iso19139-keyword-with-anchor"/>
        <thesaurus key="external.theme.rod-eionet-europa-eu"
                   fieldset="false"
                   suggestion="true"
                   transformations="to-iso19139-keyword-with-anchor"/>
      </thesaurusList>
      <sidePanel>
        <directive data-gn-overview-manager=""
                   data-file-types=".png,.gif,.jpeg,.jpg"
                   displayIfRecord="not(contains(gmd:MD_Metadata/
                                    gmd:hierarchyLevel/*/@codeListValue,
                                    'nonGeographicDataset'))"/>

        <directive data-gn-distribution-resources-panel="gnCurrentEdit.metadata"
                   data-mode="viewConfig.distributionConfig.layout || ''"
                   data-editor-config="default"
                   data-related-config="[{
                                           title: 'download',
                                           filter: 'protocol:WWW:URL|WWW:LINK*|EEA.*|WWW:DOWNLOAD.*',
                                           editActions: ['addOnlinesrc']},
                                         {
                                           title: 'Services',
                                           filter: 'protocol:OGC:.*|ESRI:.*',
                                           editActions: ['addOnlinesrc']},
                                         {
                                            title: 'links',
                                            filter:'-protocol:OGC:.*|ESRI:.*|EEA.*|WWW:URL|WWW:DOWNLOAD.*',
                                            editActions: ['addOnlinesrc']}]"
        />

        <directive data-gn-onlinesrc-list=""
                   data-types="dataset|service|source|sibling|associated|fcats"
                   displayIfRecord="not(contains(gmd:MD_Metadata/
                                    gmd:hierarchyLevel/*/@codeListValue,
                                    'nonGeographicDataset'))"/>
        <directive data-gn-onlinesrc-list=""
                   data-types="parent|source|fcats"
                   displayIfRecord="contains(gmd:MD_Metadata/
                                    gmd:hierarchyLevel/*/@codeListValue,
                                    'nonGeographicDataset')"/>

        <text ref="eea-associatedResource-help"
              if="not(contains(gmd:MD_Metadata/
                                    gmd:hierarchyLevel/*/@codeListValue,
                                    'nonGeographicDataset'))"/>

        <directive data-gn-validation-report=""/>

        <text ref="eea-contact"/>
      </sidePanel>

      <tab id="eea-default" default="true" mode="flat" >
        <section name="eea-identification">

          <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:citation/*/gmd:title"/>
          <text ref="eea-title-help"/>

          <field name="eea-resource-identifier"
                 xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:citation/*/gmd:identifier/*/gmd:code"/>

          <action type="add"
                  btnLabel="eea-add-identifier"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/*/gmd:citation/*/gmd:identifier/*/gmd:code) = 0"
                  or="identifier"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:citation/*">
            <template>
              <snippet>
                <gmd:identifier>
                  <gmd:MD_Identifier>
                    <gmd:code>
                      <gco:CharacterString>[Provider_DataType_EpsgCode_ScaleResolution_ScaleResUnit_DatasetShortName_PublicOrInternal_TimeCoverage_VersionNumber_RevisionNumber]</gco:CharacterString>
                    </gmd:code>
                  </gmd:MD_Identifier>
                </gmd:identifier>
              </snippet>
            </template>
          </action>
          <action type="process"
                  process="eea-add-datasharelink"
                  btnLabel="eea-add-datasharelink"
                  btnClass="fa fa-fw fa-download"
                  if="count(*/gmd:distributionInfo/*/gmd:transferOptions/*/gmd:onLine/*[starts-with(gmd:linkage/*/text(), 'https://sdi.eea.europa.eu/webdav/datastore')]) = 0"
                  or="onLine"
                  in="/gmd:MD_Metadata/gmd:distributionInfo/*/gmd:transferOptions/*"/>

          <text ref="eea-identifier-help"/>


          <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:citation/*/gmd:edition"
                 or="edition" in="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:citation/*"/>
          <text ref="eea-edition-help"/>

          <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:citation/*/gmd:date"
                 or="date" in="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:citation/*"/>
          <text ref="eea-date-help"/>

          <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:abstract"/>
          <text ref="eea-abstract-help"/>

          <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:status"
                 or="status" in="/gmd:MD_Metadata/gmd:identificationInfo/*"/>

          <action type="suggest"
                  process="add-date-for-status"/>

          <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:supplementalInformation"
                 or="supplementalInformation"
                 in="/gmd:MD_Metadata/gmd:identificationInfo/*"/>

          <text ref="eea-supplementalInformation-help"/>



          <action type="add"
                  btnLabel="eea-add-taskman-ticket"
                  if="count(*/gmd:distributionInfo/*/gmd:transferOptions/*/gmd:onLine/*[starts-with(gmd:linkage/*/text(), 'https://taskman.eionet.europa.eu/issues')]) = 0"
                  or="onLine"
                  in="/gmd:MD_Metadata/gmd:distributionInfo/*/gmd:transferOptions/*">
            <template>
              <snippet>
                <gmd:onLine gco:nilReason="withheld">
                  <gmd:CI_OnlineResource>
                    <gmd:linkage>
                      <gmd:URL>https://taskman.eionet.europa.eu/issues/...</gmd:URL>
                    </gmd:linkage>
                    <gmd:protocol>
                      <gco:CharacterString>WWW:LINK-1.0-http--link</gco:CharacterString>
                    </gmd:protocol>
                    <gmd:name>
                      <gco:CharacterString>EEA Taskman ticket</gco:CharacterString>
                    </gmd:name>
                    <gmd:function>
                      <gmd:CI_OnLineFunctionCode codeList="http://standards.iso.org/iso/19139/resources/gmxCodelists.xml#CI_OnLineFunctionCode"
                                                 codeListValue="information"/>
                    </gmd:function>
                  </gmd:CI_OnlineResource>
                </gmd:onLine>
              </snippet>
            </template>
          </action>

          <field name="eea-taskman-ticket"
                 xpath="/gmd:MD_Metadata/gmd:distributionInfo/*/gmd:transferOptions/*/gmd:onLine/*/gmd:linkage[starts-with(*/text(), 'https://taskman.eionet.europa.eu/issues')]"/>

          <field name="overviews"
                 xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:graphicOverview/*/gmd:fileName"/>

          <action type="add"
                  btnLabel="eea-add-overview"
                  if="(count(gmd:MD_Metadata/gmd:hierarchyLevel[*/@codeListValue =
                                    'nonGeographicDataset'])
                      + count(gmd:MD_Metadata/gmd:identificationInfo/*/gmd:graphicOverview)) = 0"
                  or="graphicOverview"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/*">
            <template>
              <snippet>
                <gmd:graphicOverview>
                  <gmd:MD_BrowseGraphic>
                    <gmd:fileName>
                      <gco:CharacterString>https://sdi.eea.europa.eu/public/catalogue-graphic-overview/REPLACEBYUUID.png</gco:CharacterString>
                    </gmd:fileName>
                  </gmd:MD_BrowseGraphic>
                </gmd:graphicOverview>
              </snippet>
            </template>
          </action>
          <text if="(count(gmd:MD_Metadata/gmd:hierarchyLevel[*/@codeListValue =
                                    'nonGeographicDataset'])
                      + count(gmd:MD_Metadata/gmd:identificationInfo/*/gmd:graphicOverview)) = 0"
                ref="eea-add-overview-help"/>

        </section>


        <section name="eea-classification">
          <text ref="eea-classification-help"/>

          <section name="eea-topic">
            <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:topicCategory"/>
            <text ref="eea-topic-help"/>
          </section>

          <field name="eea-keyword-inspire"
                 if="not(contains(gmd:MD_Metadata/
                                    gmd:hierarchyLevel/*/@codeListValue,
                                    'nonGeographicDataset'))"
                 xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[*/gmd:thesaurusName/*/gmd:title/*/text() = 'GEMET - INSPIRE themes, version 1.0']"/>

          <action type="add"
                  btnLabel="eea-add-inspiretheme"
                  if="(count(gmd:MD_Metadata/gmd:hierarchyLevel[*/@codeListValue =
                                    'nonGeographicDataset'])
                      + count(gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[*/gmd:thesaurusName/*/gmd:title/*/text() = 'GEMET - INSPIRE themes, version 1.0'])) = 0"
                  or="descriptiveKeywords"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/*">
            <template>
              <snippet>
                <gmd:descriptiveKeywords>
                  <gmd:MD_Keywords>
                    <gmd:keyword gco:nilReason="missing">
                      <gmx:Anchor xlink:href=""/>
                    </gmd:keyword>
                    <gmd:type>
                      <gmd:MD_KeywordTypeCode codeList="http://standards.iso.org/iso/19139/resources/gmxCodelists.xml#MD_KeywordTypeCode"
                                              codeListValue="theme"/>
                    </gmd:type>
                    <gmd:thesaurusName>
                      <gmd:CI_Citation>
                        <gmd:title>
                          <gmx:Anchor xlink:href="http://inspire.ec.europa.eu/theme">GEMET - INSPIRE themes, version 1.0</gmx:Anchor>
                        </gmd:title>
                        <gmd:date>
                          <gmd:CI_Date>
                            <gmd:date>
                              <gco:Date>2008-06-01</gco:Date>
                            </gmd:date>
                            <gmd:dateType>
                              <gmd:CI_DateTypeCode codeList="http://standards.iso.org/iso/19139/resources/gmxCodelists.xml#CI_DateTypeCode"
                                                   codeListValue="publication"/>
                            </gmd:dateType>
                          </gmd:CI_Date>
                        </gmd:date>
                        <gmd:identifier>
                          <gmd:MD_Identifier>
                            <gmd:code>
                              <gmx:Anchor xlink:href="https://galliwasp.eea.europa.eu/catalogue/srv/api/registries/vocabularies/external.theme.httpinspireeceuropaeutheme-theme">geonetwork.thesaurus.external.theme.httpinspireeceuropaeutheme-theme</gmx:Anchor>
                            </gmd:code>
                          </gmd:MD_Identifier>
                        </gmd:identifier>
                      </gmd:CI_Citation>
                    </gmd:thesaurusName>
                  </gmd:MD_Keywords>
                </gmd:descriptiveKeywords>
              </snippet>
            </template>
          </action>
          <text if="not(contains(gmd:MD_Metadata/
                                    gmd:hierarchyLevel/*/@codeListValue,
                                    'nonGeographicDataset'))"
                ref="eea-inspire-help"/>
          <field name="eea-keyword-gemet"
                 xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[*/gmd:thesaurusName/*/gmd:title/*/text() = 'GEMET']"/>

          <action type="add"
                  btnLabel="eea-add-gemet"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[*/gmd:thesaurusName/*/gmd:title/*/text() = 'GEMET']) = 0"
                  or="descriptiveKeywords"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/*">
            <template>
              <snippet>
                <gmd:descriptiveKeywords>
                  <gmd:MD_Keywords>
                    <gmd:keyword gco:nilReason="missing">
                      <gco:CharacterString/>
                    </gmd:keyword>
                    <gmd:type>
                      <gmd:MD_KeywordTypeCode codeList="http://standards.iso.org/iso/19139/resources/gmxCodelists.xml#MD_KeywordTypeCode"
                                              codeListValue="theme"/>
                    </gmd:type>
                    <gmd:thesaurusName>
                      <gmd:CI_Citation>
                        <gmd:title>
                          <gco:CharacterString>GEMET</gco:CharacterString>
                        </gmd:title>
                        <gmd:date>
                          <gmd:CI_Date>
                            <gmd:date>
                              <gco:Date>2018-08-16</gco:Date>
                            </gmd:date>
                            <gmd:dateType>
                              <gmd:CI_DateTypeCode codeList="http://standards.iso.org/iso/19139/resources/gmxCodelists.xml#CI_DateTypeCode"
                                                   codeListValue="publication"/>
                            </gmd:dateType>
                          </gmd:CI_Date>
                        </gmd:date>
                        <gmd:identifier>
                          <gmd:MD_Identifier>
                            <gmd:code>
                              <gmx:Anchor xlink:href="https://galliwasp.eea.europa.eu/catalogue/srv/api/registries/vocabularies/external.theme.gemet">geonetwork.thesaurus.external.theme.gemet</gmx:Anchor>
                            </gmd:code>
                          </gmd:MD_Identifier>
                        </gmd:identifier>
                      </gmd:CI_Citation>
                    </gmd:thesaurusName>
                  </gmd:MD_Keywords>
                </gmd:descriptiveKeywords>
              </snippet>
            </template>
          </action>
          <text ref="eea-gemet-help"/>




          <field name="eea-keyword-rod"
                 xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[*/gmd:thesaurusName/*/gmd:title/*/text() = 'Reporting obligations']"/>

          <action type="add"
                  btnLabel="eea-add-rod"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[*/gmd:thesaurusName/*/gmd:title/*/text() = 'Reporting obligations']) = 0"
                  or="descriptiveKeywords"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/*">
            <template>
              <snippet>
                <gmd:descriptiveKeywords>
                  <gmd:MD_Keywords>
                    <gmd:keyword gco:nilReason="missing">
                      <gco:CharacterString/>
                    </gmd:keyword>
                    <gmd:type>
                      <gmd:MD_KeywordTypeCode codeList="http://standards.iso.org/iso/19139/resources/gmxCodelists.xml#MD_KeywordTypeCode"
                                              codeListValue="theme"/>
                    </gmd:type>
                    <gmd:thesaurusName>
                      <gmd:CI_Citation>
                        <gmd:title>
                          <gco:CharacterString>Reporting obligations</gco:CharacterString>
                        </gmd:title>
                        <gmd:date>
                          <gmd:CI_Date>
                            <gmd:date>
                              <gco:Date>2021-08-25</gco:Date>
                            </gmd:date>
                            <gmd:dateType>
                              <gmd:CI_DateTypeCode codeList="http://standards.iso.org/iso/19139/resources/gmxCodelists.xml#CI_DateTypeCode"
                                                   codeListValue="publication"/>
                            </gmd:dateType>
                          </gmd:CI_Date>
                        </gmd:date>
                        <gmd:identifier>
                          <gmd:MD_Identifier>
                            <gmd:code>
                              <gmx:Anchor xlink:href="https://sdi.eea.europa.eu/catalogue/srv/api/registries/vocabularies/external.theme.rod-eionet-europa-eu">geonetwork.thesaurus.external.theme.rod-eionet-europa-eu</gmx:Anchor>
                            </gmd:code>
                          </gmd:MD_Identifier>
                        </gmd:identifier>
                      </gmd:CI_Citation>
                    </gmd:thesaurusName>
                  </gmd:MD_Keywords>
                </gmd:descriptiveKeywords>
              </snippet>
            </template>
          </action>

          <text ref="eea-keyword-rod-help"/>

          <field name="eea-keyword-eeamp"
                 xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[*/gmd:thesaurusName/*/gmd:title/*/text() = 'EEA Management Plan']"/>

          <action type="add"
                  btnLabel="eea-add-eeamp"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[*/gmd:thesaurusName/*/gmd:title/*/text() = 'EEA Management Plan']) = 0"
                  or="descriptiveKeywords"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/*">
            <template>
              <snippet>
                <gmd:descriptiveKeywords>
                  <gmd:MD_Keywords>
                    <gmd:keyword gco:nilReason="missing">
                      <gco:CharacterString/>
                    </gmd:keyword>
                    <gmd:type>
                      <gmd:MD_KeywordTypeCode codeList="http://standards.iso.org/iso/19139/resources/gmxCodelists.xml#MD_KeywordTypeCode"
                                              codeListValue="theme"/>
                    </gmd:type>
                    <gmd:thesaurusName>
                      <gmd:CI_Citation>
                        <gmd:title>
                          <gco:CharacterString>EEA Management Plan</gco:CharacterString>
                        </gmd:title>
                        <gmd:date>
                          <gmd:CI_Date>
                            <gmd:date>
                              <gco:Date>2021-08-25</gco:Date>
                            </gmd:date>
                            <gmd:dateType>
                              <gmd:CI_DateTypeCode codeList="http://standards.iso.org/iso/19139/resources/gmxCodelists.xml#CI_DateTypeCode"
                                                   codeListValue="publication"/>
                            </gmd:dateType>
                          </gmd:CI_Date>
                        </gmd:date>
                        <gmd:identifier>
                          <gmd:MD_Identifier>
                            <gmd:code>
                              <gmx:Anchor xlink:href="https://sdi.eea.europa.eu/catalogue/srv/api/registries/vocabularies/local.theme.eea-mp">geonetwork.thesaurus.local.theme.eea-mp</gmx:Anchor>
                            </gmd:code>
                          </gmd:MD_Identifier>
                        </gmd:identifier>
                      </gmd:CI_Citation>
                    </gmd:thesaurusName>
                  </gmd:MD_Keywords>
                </gmd:descriptiveKeywords>
              </snippet>
            </template>
          </action>
          <text ref="eea-keyword-mp-help"/>


          <field if="count(gmd:MD_Metadata/gmd:hierarchyLevel[*/@codeListValue =
                                    'nonGeographicDataset']) = 0"
                 xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[*/gmd:thesaurusName/*/gmd:title/*/text() = 'Spatial scope']"/>

          <action type="add"
                  btnLabel="eea-add-spatial-scope"
                  if="(count(gmd:MD_Metadata/gmd:hierarchyLevel[*/@codeListValue =
                                    'nonGeographicDataset'])
                      + count(gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[*/gmd:thesaurusName/*/gmd:title/*/text() = 'Spatial scope'])) = 0"
                  or="descriptiveKeywords"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/*">
            <template>
              <snippet>
                <gmd:descriptiveKeywords>
                  <gmd:MD_Keywords>
                    <gmd:keyword>
                      <gco:CharacterString>European</gco:CharacterString>
                    </gmd:keyword>
                    <gmd:type>
                      <gmd:MD_KeywordTypeCode codeList="http://standards.iso.org/iso/19139/resources/gmxCodelists.xml#MD_KeywordTypeCode"
                                              codeListValue="theme"/>
                    </gmd:type>
                    <gmd:thesaurusName>
                      <gmd:CI_Citation>
                        <gmd:title>
                          <gco:CharacterString>Spatial scope</gco:CharacterString>
                        </gmd:title>
                        <gmd:date>
                          <gmd:CI_Date>
                            <gmd:date>
                              <gco:Date>2019-05-22</gco:Date>
                            </gmd:date>
                            <gmd:dateType>
                              <gmd:CI_DateTypeCode codeList="http://standards.iso.org/iso/19139/resources/gmxCodelists.xml#CI_DateTypeCode"
                                                   codeListValue="publication"/>
                            </gmd:dateType>
                          </gmd:CI_Date>
                        </gmd:date>
                        <gmd:identifier>
                          <gmd:MD_Identifier>
                            <gmd:code>
                              <gmx:Anchor xlink:href="https://galliwasp.eea.europa.eu/catalogue/srv/api/registries/vocabularies/external.theme.httpinspireeceuropaeumetadatacodelistSpatialScope-SpatialScope">geonetwork.thesaurus.external.theme.httpinspireeceuropaeumetadatacodelistSpatialScope-SpatialScope</gmx:Anchor>
                            </gmd:code>
                          </gmd:MD_Identifier>
                        </gmd:identifier>
                      </gmd:CI_Citation>
                    </gmd:thesaurusName>
                  </gmd:MD_Keywords>
                </gmd:descriptiveKeywords>
              </snippet>
            </template>
          </action>
          <text if="count(gmd:MD_Metadata/gmd:hierarchyLevel[*/@codeListValue =
                                    'nonGeographicDataset']) = 0"
                ref="eea-spatialscope-help"/>

          <field name="eea-keyword-spatial"
                 xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[*/gmd:thesaurusName/*/gmd:title/*/text() = 'Continents, countries, sea regions of the world.']"/>

          <action type="add"
                  btnLabel="eea-add-keyword-spatial"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[*/gmd:thesaurusName/*/gmd:title/*/text() = 'Continents, countries, sea regions of the world.']) = 0"
                  or="descriptiveKeywords"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/*">
            <template>
              <snippet>
                <gmd:descriptiveKeywords>
                  <gmd:MD_Keywords>
                    <gmd:keyword gco:nilReason="missing">
                      <gco:CharacterString/>
                    </gmd:keyword>
                    <gmd:type>
                      <gmd:MD_KeywordTypeCode codeList="http://standards.iso.org/iso/19139/resources/gmxCodelists.xml#MD_KeywordTypeCode"
                                              codeListValue="place"/>
                    </gmd:type>
                    <gmd:thesaurusName>
                      <gmd:CI_Citation>
                        <gmd:title>
                          <gco:CharacterString>Continents, countries, sea regions of the world.</gco:CharacterString>
                        </gmd:title>
                        <gmd:date>
                          <gmd:CI_Date>
                            <gmd:date>
                              <gco:Date>2015-07-17</gco:Date>
                            </gmd:date>
                            <gmd:dateType>
                              <gmd:CI_DateTypeCode codeList="http://standards.iso.org/iso/19139/resources/gmxCodelists.xml#CI_DateTypeCode"
                                                   codeListValue="publication"/>
                            </gmd:dateType>
                          </gmd:CI_Date>
                        </gmd:date>
                        <gmd:identifier>
                          <gmd:MD_Identifier>
                            <gmd:code>
                              <gmx:Anchor xlink:href="https://galliwasp.eea.europa.eu/catalogue/srv/api/registries/vocabularies/external.place.regions">geonetwork.thesaurus.external.place.regions</gmx:Anchor>
                            </gmd:code>
                          </gmd:MD_Identifier>
                        </gmd:identifier>
                      </gmd:CI_Citation>
                    </gmd:thesaurusName>
                  </gmd:MD_Keywords>
                </gmd:descriptiveKeywords>
              </snippet>
            </template>
          </action>
          <text ref="eea-country-help"/>

          <field name="eea-keyword-cat"
                 xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[*/gmd:thesaurusName/*/gmd:title/*/text() = 'EEA categories']"
                 />

          <action type="add"
                  btnLabel="eea-add-categories"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[*/gmd:thesaurusName/*/gmd:title/*/text() = 'EEA categories']) = 0"
                  or="descriptiveKeywords"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/*">
            <template>
              <snippet>
                <gmd:descriptiveKeywords gco:nilReason="withheld">
                  <gmd:MD_Keywords>
                    <gmd:keyword>
                      <gco:CharacterString>geospatial data</gco:CharacterString>
                    </gmd:keyword>
                    <gmd:type>
                      <gmd:MD_KeywordTypeCode codeList="http://standards.iso.org/iso/19139/resources/gmxCodelists.xml#MD_KeywordTypeCode"
                                              codeListValue="theme"/>
                    </gmd:type>
                    <gmd:thesaurusName>
                      <gmd:CI_Citation>
                        <gmd:title>
                          <gco:CharacterString>EEA categories</gco:CharacterString>
                        </gmd:title>
                        <gmd:date>
                          <gmd:CI_Date>
                            <gmd:date>
                              <gco:Date>2010-07-06</gco:Date>
                            </gmd:date>
                            <gmd:dateType>
                              <gmd:CI_DateTypeCode codeList="http://standards.iso.org/iso/19139/resources/gmxCodelists.xml#CI_DateTypeCode"
                                                   codeListValue="publication"/>
                            </gmd:dateType>
                          </gmd:CI_Date>
                        </gmd:date>
                        <gmd:identifier>
                          <gmd:MD_Identifier>
                            <gmd:code>
                              <gmx:Anchor xlink:href="https://galliwasp.eea.europa.eu/catalogue/srv/api/registries/vocabularies/local.theme.eea-categories">geonetwork.thesaurus.local.theme.eea-categories</gmx:Anchor>
                            </gmd:code>
                          </gmd:MD_Identifier>
                        </gmd:identifier>
                      </gmd:CI_Citation>
                    </gmd:thesaurusName>
                  </gmd:MD_Keywords>
                </gmd:descriptiveKeywords>
              </snippet>
            </template>
          </action>

          <text ref="eea-categories-help"
                displayIfServiceInfo="count(session[profile = 'Administrator']) = 1"/>

          <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[*/gmd:thesaurusName/*/gmd:title/*/text() = 'EEA topics']"/>

          <action type="add"
                  btnLabel="eea-add-topics"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[*/gmd:thesaurusName/*/gmd:title/*/text() = 'EEA topics']) = 0"
                  or="descriptiveKeywords"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/*">
            <template>
              <snippet>
                <gmd:descriptiveKeywords>
                  <gmd:MD_Keywords>
                    <gmd:type>
                      <gmd:MD_KeywordTypeCode codeList="http://standards.iso.org/iso/19139/resources/gmxCodelists.xml#MD_KeywordTypeCode"
                                              codeListValue="theme"/>
                    </gmd:type>
                    <gmd:thesaurusName>
                      <gmd:CI_Citation>
                        <gmd:title>
                          <gmx:Anchor xlink:href="https://www.eea.europa.eu/themes">EEA topics</gmx:Anchor>
                        </gmd:title>
                        <gmd:date>
                          <gmd:CI_Date>
                            <gmd:date>
                              <gco:Date>2020-09-24</gco:Date>
                            </gmd:date>
                            <gmd:dateType>
                              <gmd:CI_DateTypeCode codeList="http://standards.iso.org/iso/19139/resources/gmxCodelists.xml#CI_DateTypeCode"
                                                   codeListValue="publication"/>
                            </gmd:dateType>
                          </gmd:CI_Date>
                        </gmd:date>
                        <gmd:identifier>
                          <gmd:MD_Identifier>
                            <gmd:code>
                              <gmx:Anchor xlink:href="https://sdi.eea.europa.eu/catalogue/srv/api/registries/vocabularies/external.theme.eea-topics">geonetwork.thesaurus.external.theme.eea-topics</gmx:Anchor>
                            </gmd:code>
                          </gmd:MD_Identifier>
                        </gmd:identifier>
                      </gmd:CI_Citation>
                    </gmd:thesaurusName>
                  </gmd:MD_Keywords>
                </gmd:descriptiveKeywords>
              </snippet>
            </template>
          </action>
          <text ref="eea-topics-help"/>


          <section name="eea-keyword-list">
            <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[*/gmd:thesaurusName/*/gmd:title/*/text() = 'EEA keyword list']/*/gmd:keyword"
                   or="keyword"
                   in="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[*/gmd:thesaurusName/*/gmd:title/*/text() = 'EEA keyword list']/*"/>

            <action type="add"
                    btnLabel="eea-add-eea-keywords"
                    if="count(gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[*/gmd:thesaurusName/*/gmd:title/*/text() = 'EEA keyword list']) = 0"
                    or="descriptiveKeywords"
                    in="/gmd:MD_Metadata/gmd:identificationInfo/*">
              <template>
                <snippet>
                  <gmd:descriptiveKeywords gco:nilReason="withheld">
                    <gmd:MD_Keywords>
                      <gmd:keyword gco:nilReason="missing">
                        <gco:CharacterString/>
                      </gmd:keyword>
                      <gmd:thesaurusName>
                        <gmd:CI_Citation>
                          <gmd:title>
                            <gco:CharacterString>EEA keyword list</gco:CharacterString>
                          </gmd:title>
                          <gmd:date>
                            <gmd:CI_Date>
                              <gmd:date>
                                <gco:Date>2002-03-01</gco:Date>
                              </gmd:date>
                              <gmd:dateType>
                                <gmd:CI_DateTypeCode codeList="http://standards.iso.org/iso/19139/resources/gmxCodelists.xml#CI_DateTypeCode"
                                                     codeListValue="publication"/>
                              </gmd:dateType>
                            </gmd:CI_Date>
                          </gmd:date>
                        </gmd:CI_Citation>
                      </gmd:thesaurusName>
                    </gmd:MD_Keywords>
                  </gmd:descriptiveKeywords>
                </snippet>
              </template>
            </action>
            <text ref="eea-keywords-help"/>
          </section>


          <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[*/gmd:thesaurusName/*/gmd:title/*/text() = 'INSPIRE priority data set']"/>

          <!--<section name="eea-category">
            <directive data-gn-metadata-category-updater="mdCategories"
                       data-metadata-uuid="gnCurrentEdit.uuid"
                       data-gn-mode="autocomplete"/>
            <text ref="eea-catalogcategory-help"/>
          </section>-->
        </section>

        <section name="eea-coverage"
                 displayIfRecord="count(gmd:MD_Metadata/gmd:hierarchyLevel[*/@codeListValue =
                                    'nonGeographicDataset']) = 0">
          <field  xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:extent/*/gmd:geographicElement"/>
          <action type="add"
                  btnLabel="eea-add-extent"
                  or="extent"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/*">
            <template>
              <snippet>
                <gmd:extent>
                  <gmd:EX_Extent>
                    <gmd:geographicElement>
                      <gmd:EX_GeographicBoundingBox>
                        <gmd:westBoundLongitude>
                          <gco:Decimal></gco:Decimal>
                        </gmd:westBoundLongitude>
                        <gmd:eastBoundLongitude>
                          <gco:Decimal></gco:Decimal>
                        </gmd:eastBoundLongitude>
                        <gmd:southBoundLatitude>
                          <gco:Decimal></gco:Decimal>
                        </gmd:southBoundLatitude>
                        <gmd:northBoundLatitude>
                          <gco:Decimal></gco:Decimal>
                        </gmd:northBoundLatitude>
                      </gmd:EX_GeographicBoundingBox>
                    </gmd:geographicElement>
                  </gmd:EX_Extent>
                </gmd:extent>
              </snippet>
            </template>
          </action>

          <text if="count(gmd:MD_Metadata/gmd:hierarchyLevel[*/@codeListValue =
                                    'nonGeographicDataset']) = 0"
                ref="eea-bbox-help"/>


          <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:extent/*/gmd:temporalElement"/>

          <action type="add"
                  btnLabel="eea-add-temporal-extent"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo//gmd:temporalElement) = 0"
                  or="extent"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/*">
            <template>
              <snippet>
                <gmd:extent>
                  <gmd:EX_Extent>
                    <gmd:temporalElement>
                      <gmd:EX_TemporalExtent>
                        <gmd:extent>
                          <gml:TimePeriod>
                            <gml:beginPosition/>
                            <gml:endPosition/>
                          </gml:TimePeriod>
                        </gmd:extent>
                      </gmd:EX_TemporalExtent>
                    </gmd:temporalElement>
                  </gmd:EX_Extent>
                </gmd:extent>
              </snippet>
            </template>
          </action>
          <text ref="eea-temporal-help"/>
        </section>

        <section displayIfRecord="count(gmd:MD_Metadata/gmd:hierarchyLevel[*/@codeListValue =
                                    'nonGeographicDataset']) = 1">
          <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:extent/*/gmd:temporalElement"/>

          <action type="add"
                  btnLabel="eea-add-temporal-extent"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo//gmd:temporalElement) = 0"
                  or="extent"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/*">
            <template>
              <snippet>
                <gmd:extent>
                  <gmd:EX_Extent>
                    <gmd:temporalElement>
                      <gmd:EX_TemporalExtent>
                        <gmd:extent>
                          <gml:TimePeriod>
                            <gml:beginPosition/>
                            <gml:endPosition/>
                          </gml:TimePeriod>
                        </gmd:extent>
                      </gmd:EX_TemporalExtent>
                    </gmd:temporalElement>
                  </gmd:EX_Extent>
                </gmd:extent>
              </snippet>
            </template>
          </action>
          <text ref="eea-temporal-help"/>
        </section>


        <section name="eea-technical-details"
                 displayIfRecord="count(gmd:MD_Metadata/gmd:hierarchyLevel[*/@codeListValue =
                                    'nonGeographicDataset']) = 0">

          <field xpath="/gmd:MD_Metadata/gmd:referenceSystemInfo"/>
          <!-- Add one of the CRS proposed using the dropdown -->
          <action type="add"
                  btnLabel="addCrs"
                  name="referenceSystemInfo" or="referenceSystemInfo"
                  in="/gmd:MD_Metadata">
            <template>
              <!-- TODO: Update list to use INSPIRE TG2 encoding -->
              <snippet label="addCrs4326">
                <gmd:referenceSystemInfo>
                  <gmd:MD_ReferenceSystem>
                    <gmd:referenceSystemIdentifier>
                      <gmd:RS_Identifier>
                        <gmd:code>
                          <gmx:Anchor xlink:href="http://www.opengis.net/def/crs/EPSG/0/4326">EPSG:4326</gmx:Anchor>
                        </gmd:code>
                      </gmd:RS_Identifier>
                    </gmd:referenceSystemIdentifier>
                  </gmd:MD_ReferenceSystem>
                </gmd:referenceSystemInfo>
              </snippet>
              <snippet label="addCrs4258">
                <gmd:referenceSystemInfo>
                  <gmd:MD_ReferenceSystem>
                    <gmd:referenceSystemIdentifier>
                      <gmd:RS_Identifier>
                        <gmd:code>
                          <gmx:Anchor xlink:href="http://www.opengis.net/def/crs/EPSG/0/4258">EPSG:4258</gmx:Anchor>
                        </gmd:code>
                      </gmd:RS_Identifier>
                    </gmd:referenceSystemIdentifier>
                  </gmd:MD_ReferenceSystem>
                </gmd:referenceSystemInfo>
              </snippet>
              <snippet label="addCrs3035">
                <gmd:referenceSystemInfo>
                  <gmd:MD_ReferenceSystem>
                    <gmd:referenceSystemIdentifier>
                      <gmd:RS_Identifier>
                        <gmd:code>
                          <gmx:Anchor xlink:href="http://www.opengis.net/def/crs/EPSG/0/3035">EPSG:3035</gmx:Anchor>
                        </gmd:code>
                      </gmd:RS_Identifier>
                    </gmd:referenceSystemIdentifier>
                  </gmd:MD_ReferenceSystem>
                </gmd:referenceSystemInfo>
              </snippet>
              <snippet label="addCrs32628">
                <gmd:referenceSystemInfo>
                  <gmd:MD_ReferenceSystem>
                    <gmd:referenceSystemIdentifier>
                      <gmd:RS_Identifier>
                        <gmd:code>
                          <gmx:Anchor xlink:href="http://www.opengis.net/def/crs/EPSG/0/32628">EPSG:32628</gmx:Anchor>
                        </gmd:code>
                      </gmd:RS_Identifier>
                    </gmd:referenceSystemIdentifier>
                  </gmd:MD_ReferenceSystem>
                </gmd:referenceSystemInfo>
              </snippet>
              <snippet label="addCrs32629">
                <gmd:referenceSystemInfo>
                  <gmd:MD_ReferenceSystem>
                    <gmd:referenceSystemIdentifier>
                      <gmd:RS_Identifier>
                        <gmd:code>
                          <gmx:Anchor xlink:href="http://www.opengis.net/def/crs/EPSG/0/32629">EPSG:32629</gmx:Anchor>
                        </gmd:code>
                      </gmd:RS_Identifier>
                    </gmd:referenceSystemIdentifier>
                  </gmd:MD_ReferenceSystem>
                </gmd:referenceSystemInfo>
              </snippet>
              <snippet label="addCrs32630">
                <gmd:referenceSystemInfo>
                  <gmd:MD_ReferenceSystem>
                    <gmd:referenceSystemIdentifier>
                      <gmd:RS_Identifier>
                        <gmd:code>
                          <gmx:Anchor xlink:href="http://www.opengis.net/def/crs/EPSG/0/32630">EPSG:32630</gmx:Anchor>
                        </gmd:code>
                      </gmd:RS_Identifier>
                    </gmd:referenceSystemIdentifier>
                  </gmd:MD_ReferenceSystem>
                </gmd:referenceSystemInfo>
              </snippet>
              <snippet label="addCrs32631">
                <gmd:referenceSystemInfo>
                  <gmd:MD_ReferenceSystem>
                    <gmd:referenceSystemIdentifier>
                      <gmd:RS_Identifier>
                        <gmd:code>
                          <gmx:Anchor xlink:href="http://www.opengis.net/def/crs/EPSG/0/32631">EPSG:32631</gmx:Anchor>
                        </gmd:code>
                      </gmd:RS_Identifier>
                    </gmd:referenceSystemIdentifier>
                  </gmd:MD_ReferenceSystem>
                </gmd:referenceSystemInfo>
              </snippet>
              <snippet label="addCrs32632">
                <gmd:referenceSystemInfo>
                  <gmd:MD_ReferenceSystem>
                    <gmd:referenceSystemIdentifier>
                      <gmd:RS_Identifier>
                        <gmd:code>
                          <gmx:Anchor xlink:href="http://www.opengis.net/def/crs/EPSG/0/32632">EPSG:32632</gmx:Anchor>
                        </gmd:code>
                      </gmd:RS_Identifier>
                    </gmd:referenceSystemIdentifier>
                  </gmd:MD_ReferenceSystem>
                </gmd:referenceSystemInfo>
              </snippet>
              <snippet label="addCrs32633">
                <gmd:referenceSystemInfo>
                  <gmd:MD_ReferenceSystem>
                    <gmd:referenceSystemIdentifier>
                      <gmd:RS_Identifier>
                        <gmd:code>
                          <gmx:Anchor xlink:href="http://www.opengis.net/def/crs/EPSG/0/32633">EPSG:32633</gmx:Anchor>
                        </gmd:code>
                      </gmd:RS_Identifier>
                    </gmd:referenceSystemIdentifier>
                  </gmd:MD_ReferenceSystem>
                </gmd:referenceSystemInfo>
              </snippet>
              <snippet label="addCrs32634">
                <gmd:referenceSystemInfo>
                  <gmd:MD_ReferenceSystem>
                    <gmd:referenceSystemIdentifier>
                      <gmd:RS_Identifier>
                        <gmd:code>
                          <gmx:Anchor xlink:href="http://www.opengis.net/def/crs/EPSG/0/32634">EPSG:32634</gmx:Anchor>
                        </gmd:code>
                      </gmd:RS_Identifier>
                    </gmd:referenceSystemIdentifier>
                  </gmd:MD_ReferenceSystem>
                </gmd:referenceSystemInfo>
              </snippet>
              <snippet label="addCrs32635">
                <gmd:referenceSystemInfo>
                  <gmd:MD_ReferenceSystem>
                    <gmd:referenceSystemIdentifier>
                      <gmd:RS_Identifier>
                        <gmd:code>
                          <gmx:Anchor xlink:href="http://www.opengis.net/def/crs/EPSG/0/32635">EPSG:32635</gmx:Anchor>
                        </gmd:code>
                      </gmd:RS_Identifier>
                    </gmd:referenceSystemIdentifier>
                  </gmd:MD_ReferenceSystem>
                </gmd:referenceSystemInfo>
              </snippet>
              <snippet label="addCrs32740">
                <gmd:referenceSystemInfo>
                  <gmd:MD_ReferenceSystem>
                    <gmd:referenceSystemIdentifier>
                      <gmd:RS_Identifier>
                        <gmd:code>
                          <gmx:Anchor xlink:href="http://www.opengis.net/def/crs/EPSG/0/32740">EPSG:32740</gmx:Anchor>
                        </gmd:code>
                      </gmd:RS_Identifier>
                    </gmd:referenceSystemIdentifier>
                  </gmd:MD_ReferenceSystem>
                </gmd:referenceSystemInfo>
              </snippet>
            </template>
          </action>

          <text ref="eea-crs-help"/>

          <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:spatialRepresentationType"
                 or="spatialRepresentationType"
                 in="/gmd:MD_Metadata/gmd:identificationInfo/*"/>

          <!-- -Display action only if none set. -->
          <action type="add"
                  btnLabel="addSpatialRepresentationType"
                  or="spatialRepresentationType"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/*/gmd:spatialRepresentationType/*/@codeListValue) = 0"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/*">
            <template>
              <snippet>
                <gmd:spatialRepresentationType>
                  <gmd:MD_SpatialRepresentationTypeCode codeList="https://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#MD_SpatialRepresentationTypeCode"
                                                        codeListValue=""/>
                </gmd:spatialRepresentationType>
              </snippet>
            </template>
          </action>

          <text ref="eea-spatialreptype-help"/>




          <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/
                    */gmd:spatialResolution/
                      */gmd:equivalentScale/*/gmd:denominator"
                 del="../../../.."/>


          <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/
                    */gmd:spatialResolution/*/gmd:distance"
                 del="../.."/>
          <!--
          if="count(gmd:MD_Metadata/gmd:identificationInfo[*/gmd:spatialRepresentationType/*/@codeListValue = 'vector']) = 1"
          -->
          <action type="add" btnLabel="spatialResolution" or="spatialResolution"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/*">
            <template>
              <snippet>
                <gmd:spatialResolution>
                  <gmd:MD_Resolution>
                    <gmd:equivalentScale>
                      <gmd:MD_RepresentativeFraction>
                        <gmd:denominator>
                          <gco:Integer/>
                        </gmd:denominator>
                      </gmd:MD_RepresentativeFraction>
                    </gmd:equivalentScale>
                  </gmd:MD_Resolution>
                </gmd:spatialResolution>
              </snippet>
            </template>
          </action>

          <!--
          if="count(gmd:MD_Metadata/gmd:identificationInfo[*/gmd:spatialRepresentationType/*/@codeListValue = 'grid']) = 1"
          -->
          <action type="add" btnLabel="spatialDistance" or="spatialResolution"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/*">
            <template>
              <snippet>
                <gmd:spatialResolution>
                  <gmd:MD_Resolution>
                    <gmd:distance>
                      <gco:Distance uom="m"/>
                    </gmd:distance>
                  </gmd:MD_Resolution>
                </gmd:spatialResolution>
              </snippet>
            </template>
          </action>

          <text ref="eea-spatialresolution-help"/>



          <field name="eea-mmu"
                 xpath="/gmd:MD_Metadata/gmd:dataQualityInfo/*/gmd:report/*[
                          gmd:nameOfMeasure = 'Minimum Mapping Unit']/gmd:result/*/gmd:value"/>

          <field name="eea-mmw"
                 xpath="/gmd:MD_Metadata/gmd:dataQualityInfo/*/gmd:report/*[
                          gmd:nameOfMeasure = 'Minimum Mapping Width']/gmd:result/*/gmd:value"/>

          <action type="add" btnLabel="eea-mmu" or="report"
                  in="/gmd:MD_Metadata/gmd:dataQualityInfo/*"
                  if="count(gmd:MD_Metadata/gmd:dataQualityInfo/*/gmd:report[
                          */gmd:nameOfMeasure = 'Minimum Mapping Unit']) = 0">
            <template>
              <snippet>
                <gmd:report>
                  <gmd:DQ_AbsoluteExternalPositionalAccuracy>
                    <gmd:nameOfMeasure>
                      <gco:CharacterString>Minimum Mapping Unit</gco:CharacterString>
                    </gmd:nameOfMeasure>
                    <gmd:result>
                      <gmd:DQ_QuantitativeResult>
                        <gmd:valueUnit>
                          <gml:UnitDefinition gml:id="d3888e669a1051934">
                            <gml:identifier codeSpace="">ha</gml:identifier>
                          </gml:UnitDefinition>
                        </gmd:valueUnit>
                        <gmd:value>
                          <gco:Record/>
                        </gmd:value>
                      </gmd:DQ_QuantitativeResult>
                    </gmd:result>
                  </gmd:DQ_AbsoluteExternalPositionalAccuracy>
                </gmd:report>
              </snippet>
            </template>
          </action>
          <action type="add" btnLabel="eea-mmw" or="report"
                  in="/gmd:MD_Metadata/gmd:dataQualityInfo/*"
                  if="count(gmd:MD_Metadata/gmd:dataQualityInfo/*/gmd:report[
                          */gmd:nameOfMeasure = 'Minimum Mapping Width']) = 0">
            <template>
              <snippet>
                <gmd:report>
                  <gmd:DQ_AbsoluteExternalPositionalAccuracy>
                    <gmd:nameOfMeasure>
                      <gco:CharacterString>Minimum Mapping Width</gco:CharacterString>
                    </gmd:nameOfMeasure>
                    <gmd:result/>
                    <gmd:result>
                      <gmd:DQ_QuantitativeResult>
                        <gmd:valueUnit>
                          <gml:UnitDefinition gml:id="d3433e675a1051934">
                            <gml:identifier codeSpace="">m</gml:identifier>
                          </gml:UnitDefinition>
                        </gmd:valueUnit>
                        <gmd:value>
                          <gco:Record/>
                        </gmd:value>
                      </gmd:DQ_QuantitativeResult>
                    </gmd:result>
                  </gmd:DQ_AbsoluteExternalPositionalAccuracy>
                </gmd:report>
              </snippet>
            </template>
          </action>
          <text ref="eea-mmuw-help"/>


          <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[*/gmd:thesaurusName/*/gmd:title/*/text() = 'Temporal resolution']"/>

          <action type="add"
                  btnLabel="eea-add-temporal-resolution"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[*/gmd:thesaurusName/*/gmd:title/*/text() = 'Temporal resolution']) = 0"
                  or="descriptiveKeywords"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/*">
            <template>
              <snippet>
                <gmd:descriptiveKeywords>
                  <gmd:MD_Keywords>
                    <gmd:type>
                      <gmd:MD_KeywordTypeCode codeList="https://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#MD_KeywordTypeCode"
                                              codeListValue="temporal"/>
                    </gmd:type>
                    <gmd:thesaurusName>
                      <gmd:CI_Citation>
                        <gmd:title>
                          <gco:CharacterString>Temporal resolution</gco:CharacterString>
                        </gmd:title>
                        <gmd:date>
                          <gmd:CI_Date>
                            <gmd:date>
                              <gco:Date>2017-11-07</gco:Date>
                            </gmd:date>
                            <gmd:dateType>
                              <gmd:CI_DateTypeCode codeList="https://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#CI_DateTypeCode"
                                                   codeListValue="publication"/>
                            </gmd:dateType>
                          </gmd:CI_Date>
                        </gmd:date>
                        <gmd:identifier>
                          <gmd:MD_Identifier>
                            <gmd:code>
                              <gmx:Anchor xmlns:gmx="http://www.isotc211.org/2005/gmx"
                                          xlink:href="http://localhost:8080/geonetwork/srv/eng/thesaurus.download?ref=local.temporal.temporal-update">geonetwork.thesaurus.local.temporal.temporal-update</gmx:Anchor>
                            </gmd:code>
                          </gmd:MD_Identifier>
                        </gmd:identifier>
                      </gmd:CI_Citation>
                    </gmd:thesaurusName>
                  </gmd:MD_Keywords>
                </gmd:descriptiveKeywords>
              </snippet>
            </template>
          </action>
          <text ref="eea-temporalresolution-help"/>

        </section>



        <section name="eea-additional">

          <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:resourceMaintenance"
                 or="resourceMaintenance"
                 in="/gmd:MD_Metadata/gmd:identificationInfo/*"/>
          <text ref="eea-maintenance-help"/>

          <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:language"/>
          <text ref="eea-hr"/>


          <field name="eea-distributionFormat"
                 xpath="/gmd:MD_Metadata/gmd:distributionInfo/*/gmd:distributionFormat/*/gmd:name"
                 del="../.."/>
          <action type="add" btnLabel="eea-distributionFormat-add"
                  class="gn-required"
                  or="distributionFormat"
                  in="/gmd:MD_Metadata/gmd:distributionInfo/*">
            <template>
              <snippet>
                <gmd:distributionFormat>
                  <gmd:MD_Format>
                    <gmd:name>
                      <gco:CharacterString></gco:CharacterString>
                    </gmd:name>
                    <gmd:version gco:nilReason="missing">
                      <gco:CharacterString/>
                    </gmd:version>
                  </gmd:MD_Format>
                </gmd:distributionFormat>
              </snippet>
            </template>
          </action>


          <text ref="eea-format-help"
                if="count(gmd:MD_Metadata/gmd:hierarchyLevel[*/@codeListValue =
                                    'nonGeographicDataset']) = 0"/>
          <text ref="eea-format-tabular-help"
                if="count(gmd:MD_Metadata/gmd:hierarchyLevel[*/@codeListValue =
                                    'nonGeographicDataset']) = 1"/>

        </section>



        <section name="eea-dq">
          <field xpath="/gmd:MD_Metadata/gmd:dataQualityInfo/*/gmd:lineage"
                 or="lineage" in="/gmd:MD_Metadata/gmd:dataQualityInfo/*"/>
          <action type="add" btnLabel="eea-dq-add"
                  class="gn-required"
                  if="count(gmd:MD_Metadata/gmd:dataQualityInfo) = 0"
                  or="dataQualityInfo"
                  in="/gmd:MD_Metadata">
            <template>
              <snippet>
                <gmd:dataQualityInfo>
                  <gmd:DQ_DataQuality>
                    <gmd:scope>
                      <gmd:DQ_Scope>
                        <gmd:level>
                          <gmd:MD_ScopeCode codeList="http://standards.iso.org/iso/19139/resources/gmxCodelists.xml#MD_ScopeCode"
                                            codeListValue="dataset"/>
                        </gmd:level>
                      </gmd:DQ_Scope>
                    </gmd:scope>
                    <gmd:lineage>
                      <gmd:LI_Lineage>
                        <gmd:statement gco:nilReason="missing">
                          <gco:CharacterString/>
                        </gmd:statement>
                      </gmd:LI_Lineage>
                    </gmd:lineage>
                  </gmd:DQ_DataQuality>
                </gmd:dataQualityInfo>
              </snippet>
            </template>
          </action>
          <text ref="eea-lineage"/>

          <!-- Conformity -->
          <field name="conformity"
                 templateModeOnly="true"
                 notDisplayedIfMissing="true"
                 xpath="/gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/
                    gmd:report/gmd:DQ_DomainConsistency/gmd:result[count(gmd:DQ_ConformanceResult/gmd:specification/
                      gmd:CI_Citation/gmd:title/(gco:CharacterString|gmx:Anchor)) > 0]"
                 if="(count(gmd:MD_Metadata/gmd:hierarchyLevel[*/@codeListValue !=
          'nonGeographicDataset'])
                     + count(gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/
                      gmd:report/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/
                      gmd:CI_Citation/gmd:title[(gco:CharacterString|gmx:Anchor)])) > 0"
                 del="../..">
            <template>
              <values>
                <key label="conformity_desc"
                     xpath="gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/(gco:CharacterString|gmx:Anchor)/text()"
                     tooltip="gmd:pass">
                  <helper name="gmd:title"
                          context="/gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title"/>
                </key>
                <key label="conformity_linkage"
                     xpath="gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gmx:Anchor/@xlink:href">
                </key>
                <key label="conformity_date"
                     xpath="gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:date/gmd:CI_Date/gmd:date/gco:Date"
                     use="gn-date-picker"/>
                <key label="pass"
                     xpath="gmd:DQ_ConformanceResult/gmd:pass/gco:Boolean"
                     use="gn-checkbox-with-nilreason">
                  <directiveAttributes
                    data-tag-name="gmd:pass"
                    data-nilreason="eval#gmd:DQ_ConformanceResult/gmd:pass/@gco:nilReason"
                    data-labels='{"true": "conformant", "false": "notConformant", "unknown": "notEvaluated"}'/>
                </key>
              </values>
              <snippet>
                <gmd:result>
                  <gmd:DQ_ConformanceResult>
                    <gmd:specification>
                      <gmd:CI_Citation>
                        <gmd:title>
                          <gmx:Anchor xlink:href="{{conformity_linkage}}">{{conformity_desc}}</gmx:Anchor>
                        </gmd:title>
                        <gn:copy select="gmd:alternateTitle"/>
                        <gmd:date>
                          <gmd:CI_Date>
                            <gmd:date>
                              {{conformity_date}}
                            </gmd:date>
                            <gmd:dateType>
                              <gmd:CI_DateTypeCode
                                codeList="http://standards.iso.org/iso/19139/resources/gmxCodelists.xml#CI_DateTypeCode"
                                codeListValue="publication"/>
                            </gmd:dateType>
                          </gmd:CI_Date>
                        </gmd:date>
                        <gn:copy select="gmd:edition"/>
                        <gn:copy select="gmd:editionDate"/>
                        <gn:copy select="gmd:identifier"/>
                        <gn:copy select="gmd:citedResponsibleParty"/>
                        <gn:copy select="gmd:presentationForm"/>
                        <gn:copy select="gmd:series"/>
                        <gn:copy select="gmd:otherCitationDetails"/>
                        <gn:copy select="gmd:collectiveTitle"/>
                        <gn:copy select="gmd:ISBN"/>
                        <gn:copy select="gmd:ISSN"/>
                      </gmd:CI_Citation>
                    </gmd:specification>
                    <gn:copy select="gmd:explanation"/>
                    {{pass}}
                  </gmd:DQ_ConformanceResult>
                </gmd:result>
              </snippet>
            </template>
          </field>



          <action type="add"
                  class="gn-required"
                  btnLabel="eea-add-inspire-conformity"
                  if="(count(gmd:MD_Metadata/gmd:hierarchyLevel[*/@codeListValue =
          'nonGeographicDataset'])
                      + count(gmd:MD_Metadata/gmd:dataQualityInfo/*/gmd:report/gmd:DQ_DomainConsistency[
                              contains(gmd:result/*/gmd:specification/*/gmd:title/(gco:CharacterString|gmx:Anchor), 'No 1089/2010')])) = 0"
                  or="report"
                  in="/gmd:MD_Metadata/gmd:dataQualityInfo/*">
            <template>
              <snippet>
                <gmd:report>
                  <gmd:DQ_DomainConsistency>
                    <gmd:result>
                      <gmd:DQ_ConformanceResult>
                        <gmd:specification>
                          <gmd:CI_Citation>
                            <gmd:title>
                              <gmx:Anchor xlink:href="http://data.europa.eu/eli/reg/2010/1089">Commission Regulation (EU) No 1089/2010 of 23 November 2010 implementing Directive 2007/2/EC of the European Parliament and of the Council as regards interoperability of spatial data sets and services</gmx:Anchor>
                            </gmd:title>
                            <gmd:date>
                              <gmd:CI_Date>
                                <gmd:date>
                                  <gco:Date>2010-12-08</gco:Date>
                                </gmd:date>
                                <gmd:dateType>
                                  <gmd:CI_DateTypeCode codeList="https://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/Codelist/ML_gmxCodelists.xml#CI_DateTypeCode" codeListValue="publication">publication</gmd:CI_DateTypeCode>
                                </gmd:dateType>
                              </gmd:CI_Date>
                            </gmd:date>
                          </gmd:CI_Citation>
                        </gmd:specification>
                        <gmd:explanation>
                          <gco:CharacterString>See the referenced specification</gco:CharacterString>
                        </gmd:explanation>
                        <gmd:pass gco:nilReason="unknown"/>
                      </gmd:DQ_ConformanceResult>
                    </gmd:result>
                  </gmd:DQ_DomainConsistency>
                </gmd:report>
              </snippet>
            </template>
          </action>

          <text if="count(gmd:MD_Metadata/gmd:hierarchyLevel[*/@codeListValue =
          'nonGeographicDataset']) = 0"
                ref="eea-conformity-help"/>


          <field name="eea-source-desc"
                 xpath="/gmd:MD_Metadata/gmd:dataQualityInfo/*/gmd:source/*/gmd:description"/>


          <action type="associatedResource"
                  name="eea-add-source"
                  process="source">
          </action>

          <text ref="eea-add-source-help"/>

          <action type="associatedResource"
                  name="eea-add-isrevision"
                  process="sibling">
            <directiveAttributes>{"associationType": "isRevisionOf"}</directiveAttributes>
          </action>

          <text ref="eea-add-isrevision-help"/>
        </section>


        <section name="eea-accessConstraints"
                 displayIfRecord="count(gmd:MD_Metadata/gmd:hierarchyLevel[*/@codeListValue =
          'nonGeographicDataset']) = 0">
          <action type="add" btnLabel="eea-accessConstraints-add"
                  if="count(*/gmd:identificationInfo/*/gmd:resourceConstraints/*[gmd:accessConstraints]) = 0"
                  or="resourceConstraints"
                  in="/*/gmd:identificationInfo/*">
            <template>
              <snippet>
                <gmd:resourceConstraints>
                  <gmd:MD_LegalConstraints>
                    <gmd:accessConstraints>
                      <gmd:MD_RestrictionCode codeList="http://standards.iso.org/iso/19139/resources/gmxCodelists.xml#MD_RestrictionCode"
                                              codeListValue="otherRestrictions"/>
                    </gmd:accessConstraints>
                    <gmd:otherConstraints>
                      <gmx:Anchor xlink:href="http://inspire.ec.europa.eu/metadata-codelist/LimitationsOnPublicAccess/noLimitations">no limitations to public access</gmx:Anchor>
                    </gmd:otherConstraints>
                  </gmd:MD_LegalConstraints>
                </gmd:resourceConstraints>
              </snippet>
            </template>
          </action>

          <field xpath="/*/gmd:identificationInfo/*/gmd:resourceConstraints/*/gmd:accessConstraints"
                 del="../.."/>

          <field xpath="/*/gmd:identificationInfo/*/gmd:resourceConstraints/*[gmd:accessConstraints]/gmd:otherConstraints"
                 del="../.."
                 use="data-gn-keyword-picker">
            <directiveAttributes data-thesaurus-key="external.theme.httpinspireeceuropaeumetadatacodelistLimitationsOnPublicAccess-LimitationsOnPublicAccess"
                                 data-display-definition="true"
                                 data-show-hints-on-focus="true"
                                 data-thesaurus-concept-id-attribute="xlinkCOLONhref"/>
          </field>


          <text ref="eea-accessConstraints-help"/>
        </section>


        <section name="eea-useConstraints">
          <field xpath="/*/gmd:identificationInfo/*/gmd:resourceConstraints/*/gmd:useConstraints"
                 if="count(gmd:MD_Metadata/gmd:hierarchyLevel[*/@codeListValue =
          'nonGeographicDataset']) = 0"
                 del="../.."/>
          <field name="eea-useConstraints"
                 xpath="/*/gmd:identificationInfo/*/gmd:resourceConstraints/*[gmd:useConstraints]/gmd:otherConstraints"
                 del="../.."/>
          <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:resourceConstraints/*/gmd:useLimitation"/>


          <action type="add" btnLabel="eea-useConstraints-add"
                  if="count(*/gmd:identificationInfo/*/gmd:resourceConstraints/*[gmd:useConstraints]) = 0"
                  or="resourceConstraints"
                  in="/*/gmd:identificationInfo/*">
            <template>
              <snippet>
                <gmd:resourceConstraints>
                  <gmd:MD_LegalConstraints>
                    <gmd:useConstraints>
                      <gmd:MD_RestrictionCode codeList="http://standards.iso.org/iso/19139/resources/gmxCodelists.xml#MD_RestrictionCode"
                                              codeListValue="otherRestrictions"/>
                    </gmd:useConstraints>
                    <gmd:otherConstraints>
                      <gco:CharacterString>EEA standard re-use policy: unless otherwise indicated, re-use of content on the EEA website for commercial or non-commercial purposes is permitted free of charge, provided that the source is acknowledged (http://www.eea.europa.eu/legal/copyright). Copyright holder: European Environment Agency (EEA).</gco:CharacterString>
                    </gmd:otherConstraints>
                  </gmd:MD_LegalConstraints>
                </gmd:resourceConstraints>
              </snippet>
            </template>
          </action>

          <text ref="eea-resourceConstraints-help"
                if="count(gmd:MD_Metadata/gmd:hierarchyLevel[*/@codeListValue =
          'nonGeographicDataset']) = 0"/>
          <text ref="eea-resourceConstraints-tabular-help"
                if="count(gmd:MD_Metadata/gmd:hierarchyLevel[*/@codeListValue =
          'nonGeographicDataset']) = 1"/>
        </section>

        <!--
                <section name="eea-resourceConstraints">
                  <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:resourceConstraints/gmd:MD_LegalConstraints/gmd:accessConstraints"/>
                  <text ref="eea-accessConstraints-help"/>
                  <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:resourceConstraints/gmd:MD_LegalConstraints/gmd:otherConstraints"
                         use="data-gn-keyword-picker">
                    <directiveAttributes data-thesaurus-key="external.theme.httpinspireeceuropaeumetadatacodelistLimitationsOnPublicAccess-LimitationsOnPublicAccess"
                                         data-display-definition="true"
                                         data-thesaurus-concept-id-attribute="xlinkCOLONhref"/>
                  </field>
                  <text ref="eea-otherConstraints-help"/>
                  <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:resourceConstraints/*/gmd:useLimitation"/>
                  <text ref="eea-resourceConstraints-help"/>
                </section>
        -->


        <section name="eea-contacts">
          <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:pointOfContact"
                 or="pointOfContact" in="/gmd:MD_Metadata/gmd:identificationInfo/*"/>

          <action type="add"
                  btnLabel="eea-add-principal-investigator"
                  if="count(*/gmd:identificationInfo/*/gmd:pointOfContact/*[gmd:role/*/@codeListValue = 'principalInvestigator']) = 0"
                  or="pointOfContact" in="/gmd:MD_Metadata/gmd:identificationInfo/*">
            <template>
              <snippet>
                <gmd:pointOfContact gco:nilReason="withheld">
                  <gmd:CI_ResponsibleParty>
                    <gmd:individualName gco:nilReason="missing">
                      <gco:CharacterString/>
                    </gmd:individualName>
                    <gmd:organisationName>
                      <gco:CharacterString>European Environment Agency</gco:CharacterString>
                    </gmd:organisationName>
                    <gmd:contactInfo>
                      <gmd:CI_Contact>
                        <gmd:address>
                          <gmd:CI_Address>
                            <gmd:electronicMailAddress gco:nilReason="missing">
                              <gco:CharacterString/>
                            </gmd:electronicMailAddress>
                          </gmd:CI_Address>
                        </gmd:address>
                      </gmd:CI_Contact>
                    </gmd:contactInfo>
                    <gmd:role>
                      <gmd:CI_RoleCode codeList="http://standards.iso.org/iso/19139/resources/gmxCodelists.xml#CI_RoleCode"
                                       codeListValue="principalInvestigator"/>
                    </gmd:role>
                  </gmd:CI_ResponsibleParty>
                </gmd:pointOfContact>
              </snippet>
            </template>
          </action>


          <action type="add"
                  btnLabel="eea-add-originator"
                  or="pointOfContact" in="/gmd:MD_Metadata/gmd:identificationInfo/*">
            <template>
              <snippet>
                <gmd:pointOfContact gco:nilReason="withheld">
                  <gmd:CI_ResponsibleParty>
                    <gmd:organisationName>
                      <gco:CharacterString></gco:CharacterString>
                    </gmd:organisationName>
                    <gmd:contactInfo>
                      <gmd:CI_Contact>
                        <gmd:address>
                          <gmd:CI_Address>
                            <gmd:electronicMailAddress gco:nilReason="missing">
                              <gco:CharacterString/>
                            </gmd:electronicMailAddress>
                          </gmd:CI_Address>
                        </gmd:address>
                        <gmd:onlineResource>
                          <gmd:CI_OnlineResource>
                            <gmd:linkage>
                              <gmd:URL/>
                            </gmd:linkage>
                          </gmd:CI_OnlineResource>
                        </gmd:onlineResource>
                      </gmd:CI_Contact>
                    </gmd:contactInfo>
                    <gmd:role>
                      <gmd:CI_RoleCode codeList="http://standards.iso.org/iso/19139/resources/gmxCodelists.xml#CI_RoleCode"
                                       codeListValue="originator"/>
                    </gmd:role>
                  </gmd:CI_ResponsibleParty>
                </gmd:pointOfContact>
              </snippet>
            </template>
          </action>
          <text ref="eea-contact-help"/>
<!--
          <field name="metadata-contact"
                 xpath="/gmd:MD_Metadata/gmd:contact"
                 or="contact"
                 in="/gmd:MD_Metadata"/>-->
        </section>

      </tab>

      <flatModeExceptions>
        <for name="gmd:keyword"/>
        <for name="gmd:edition"/>
        <for name="gmd:date"/>
        <for name="gmd:status"/>
        <for name="gmd:pointOfContact"/>
        <for name="gmd:spatialRepresentationType"/>
        <for name="gmd:resourceMaintenance"/>
        <for name="gmd:supplementalInformation"/>
        <for name="gmd:lineage"/>
      </flatModeExceptions>
    </view>

    <view name="eea-series"
          displayIfRecord="contains(gmd:MD_Metadata/
                                     gmd:hierarchyLevel/*/@codeListValue,
                                   'series')"
          upAndDownControlHidden="true"
          hideTimeInCalendar="true"
          class="gn-indent-colored gn-label-above-input">

      <thesaurusList>
        <thesaurus key="external.theme.httpinspireeceuropaeutheme-theme"
                   fieldset="false"
                   suggestion="true"
                   transformations="to-iso19139-keyword-with-anchor"/>
        <thesaurus key="external.theme.httpinspireeceuropaeumetadatacodelistSpatialDataServiceCategory"
                   fieldset="false"
                   transformations="to-iso19139-keyword-with-anchor"/>
        <thesaurus key="external.theme.httpinspireeceuropaeumetadatacodelistSpatialScope-SpatialScope"
                   fieldset="false"
                   transformations="to-iso19139-keyword-with-anchor"/>
        <thesaurus key="external.theme.gemet"
                   fieldset="false"
                   suggestion="true"
                   transformations="to-iso19139-keyword-with-anchor"/>
        <thesaurus key="external.theme.eea-topics"
                   fieldset="false"
                   suggestion="true"
                   transformations="to-iso19139-keyword-with-anchor"/>
        <thesaurus key="external.theme.rod-eionet-europa-eu"
                   fieldset="false"
                   suggestion="true"
                   transformations="to-iso19139-keyword-with-anchor"/>
      </thesaurusList>
      <sidePanel>
        <directive data-gn-overview-manager=""/>
        <directive data-gn-onlinesrc-list=""
                   data-types="sibling|associated"/>

        <text ref="eea-contact"/>
      </sidePanel>

      <tab id="eea-series-default" default="true" mode="flat">
        <section name="eea-series-identification">

          <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:citation/*/gmd:title"/>
          <text ref="eea-title-help"/>

          <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:citation/*/gmd:identifier/*/gmd:code"/>

          <action type="add"
                  btnLabel="eea-add-identifier"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/*/gmd:citation/*/gmd:identifier/*/gmd:code) = 0"
                  or="identifier"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:citation/*">
            <template>
              <snippet>
                <gmd:identifier>
                  <gmd:MD_Identifier>
                    <gmd:code>
                      <gco:CharacterString>[Provider_DataType_EpsgCode_ScaleResolution_ScaleResUnit_DatasetShortName_PublicOrInternal_TimeCoverage_VersionNumber_RevisionNumber]</gco:CharacterString>
                    </gmd:code>
                  </gmd:MD_Identifier>
                </gmd:identifier>
              </snippet>
            </template>
          </action>
          <text ref="eea-identifier-help"/>

          <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:status"
                 or="status" in="/gmd:MD_Metadata/gmd:identificationInfo/*"/>
          <text ref="eea-hr"/>

          <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:abstract"/>
          <text ref="eea-abstract-help"/>

        </section>


        <section name="eea-series-member-info">

          <text>
            <div class="row">
              <div class="col-sm-12">
                <div class="alert alert-info">
                  Series information (ie. keywords, spatial and temporal extents, contact, languages, spatial representation type) can be computed from its members.

                  Use the buttons below to:
                  <ul>
                    <li>Add a new member</li>
                    <li>Synchronize the series with its members</li>
                  </ul>
                </div>
                <div class="alert alert-warning">
                  When synchronizing information from the series members you may lose information if you did manual editing of those information. Either do a complete manual encoding of the series information or synchronize it when adding a member. But don't do both.
                </div>
              </div>
            </div>
          </text>

          <action type="associatedResource"
                  name="eea-add-member"
                  process="sibling">
            <directiveAttributes>{"associationType": "isComposedOf"}</directiveAttributes>
          </action>

          <action type="process"
                  process="collection-updater"
                  btnLabel="collection-updater"
                  forceLabel="true"
                  btnClass="fa-refresh"/>

          <section name="eea-classification">
            <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:topicCategory"/>

            <field name="eea-keyword-inspire"
                   xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[*/gmd:thesaurusName/*/gmd:title/*/text() = 'GEMET - INSPIRE themes, version 1.0']"/>

            <field name="eea-keyword-gemet"
                   xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[*/gmd:thesaurusName/*/gmd:title/*/text() = 'GEMET']"/>

            <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[*/gmd:thesaurusName/*/gmd:title/*/text() = 'Spatial scope']"/>

            <field name="eea-keyword-spatial"
                   xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[*/gmd:thesaurusName/*/gmd:title/*/text() = 'Continents, countries, sea regions of the world.']"/>

            <field name="eea-keyword-cat"
                   xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[*/gmd:thesaurusName/*/gmd:title/*/text() = 'EEA categories']"/>

            <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[*/gmd:thesaurusName/*/gmd:title/*/text() = 'EEA topics']"/>

            <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[*/gmd:thesaurusName/*/gmd:title/*/text() = 'INSPIRE priority data set']"/>

            <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[*/gmd:thesaurusName/*/gmd:title/*/text() = 'Temporal resolution']"/>
          </section>

          <section name="eea-coverage">
            <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:extent/*/gmd:geographicElement"/>

            <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:extent/*/gmd:temporalElement"/>
          </section>

          <section name="eea-additional">

            <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:citation/*/gmd:date"/>

            <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:language"/>

            <field name="eea-distributionFormat"
                   xpath="/gmd:MD_Metadata/gmd:distributionInfo/*/gmd:distributionFormat/*/gmd:name"
                   del="../.."/>
          </section>

          <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:pointOfContact"/>
        </section>
      </tab>

      <flatModeExceptions>
        <for name="gmd:keyword"/>
        <for name="gmd:edition"/>
        <for name="gmd:date"/>
        <for name="gmd:status"/>
        <for name="gmd:pointOfContact"/>
        <for name="gmd:resourceMaintenance"/>
        <for name="gmd:lineage"/>
      </flatModeExceptions>
    </view>


    <!--
    Customize the editor layout by adding a class attribute
    <view name="default" class="gn-indent-bluescale gn-label-above-input">-->
    <view name="default"
          hideTimeInCalendar="true"
          class="gn-label-above-input gn-indent-bluescale">
      <sidePanel>
        <directive data-gn-need-help="creating-metadata"/>

        <directive data-gn-validation-report=""/>

        <directive data-gn-overview-manager=""
                   data-file-types=".png,.gif,.jpeg,.jpg"/>

        <directive data-gn-distribution-resources-panel="gnCurrentEdit.metadata"
                   data-mode="viewConfig.distributionConfig.layout || ''"
                   data-editor-config="default"
                   data-related-config="[{
                                           title: 'API',
                                           filter: 'protocol:OGC:.*|ESRI:.*|atom.*',
                                           editActions: ['addOnlinesrc']},
                                         {
                                           title: 'download',
                                           filter: 'protocol:.*DOWNLOAD.*|DB:.*|FILE:.*',
                                           editActions: ['addOnlinesrc']},
                                         {
                                            title: 'links',
                                            filter:'-protocol:OGC:.*|ESRI:.*|atom.*|.*DOWNLOAD.*|DB:.*|FILE:.* AND -function:legend|featureCatalogue|dataQualityReport',
                                            editActions: ['addOnlinesrc']}]"
        />

        <directive data-gn-onlinesrc-list=""
                   data-types="parent|dataset|service|source|sibling|associated|fcats"/>

        <directive gn-geo-publisher=""
                   data-ng-if="gnCurrentEdit.geoPublisherConfig"
                   data-config="{{gnCurrentEdit.geoPublisherConfig}}"
                   data-lang="lang"/>

        <directive data-gn-suggestion-list=""/>
      </sidePanel>

      <tab id="default" default="true" mode="flat">
        <!--
        Example for file upload in the main form
        <section>
          <field xpath="/gmd:MD_Metadata/gmd:identificationInfo//gmd:title"/>

          * Manage uploaded file with a WWW:DOWNLOAD protocol
          <directive data-gn-file-uploader=""
                     data-type="onlines"/>

          * Same but with custom titles and icons
          <directive data-gn-file-uploader=""
                     data-title="Resource for download"
                     data-btn-label="Drop a file here"
                     data-icon="fa-cloud"
                     data-type="onlines"/>

          * Without the panel
          <directive data-gn-file-uploader=""
                     data-title=""
                     data-type="onlines"/>

          * With a custom protocol
          <directive data-gn-file-uploader=""
                     data-protocol="DIRECTDOWNLOAD"
                     data-type="onlines"/>
        </section>-->

        <section xpath="/gmd:MD_Metadata/gmd:identificationInfo" collapsible="false"/>
        <section xpath="/gmd:MD_Metadata/gmd:referenceSystemInfo"/>
        <section xpath="/gmd:MD_Metadata/gmd:spatialRepresentationInfo"/>
        <section xpath="/gmd:MD_Metadata/gmd:distributionInfo"/>
        <section xpath="/gmd:MD_Metadata/gmd:dataQualityInfo"/>
        <section xpath="/gmd:MD_Metadata/gmd:contentInfo"/>
        <section name="metadata" collapsed="true">
          <field xpath="/gmd:MD_Metadata/gmd:fileIdentifier"/>
          <field xpath="/gmd:MD_Metadata/gmd:language" or="language" in="/gmd:MD_Metadata"/>
          <field xpath="/gmd:MD_Metadata/gmd:characterSet"/>
          <field xpath="/gmd:MD_Metadata/gmd:parentIdentifier" or="parentIdentifier"
                 in="/gmd:MD_Metadata"/>
          <field xpath="/gmd:MD_Metadata/gmd:hierarchyLevel" or="hierarchyLevel"
                 in="/gmd:MD_Metadata"/>
          <field xpath="/gmd:MD_Metadata/gmd:hierarchyLevelName" or="hierarchyLevelName"
                 in="/gmd:MD_Metadata"/>
          <field xpath="/gmd:MD_Metadata/gmd:dateStamp"/>
          <field xpath="/gmd:MD_Metadata/gmd:metadataStandardName"/>
          <field xpath="/gmd:MD_Metadata/gmd:metadataStandardVersion"/>
          <field xpath="/gmd:MD_Metadata/gmd:contact" or="contact" in="/gmd:MD_Metadata"/>
          <field xpath="/gmd:MD_Metadata/gmd:dataSetURI" or="dataSetURI" in="/gmd:MD_Metadata"/>
          <field xpath="/gmd:MD_Metadata/gmd:locale" or="locale" in="/gmd:MD_Metadata"/>
          <field xpath="/gmd:MD_Metadata/gmd:series"/>
          <field xpath="/gmd:MD_Metadata/gmd:describes"/>
          <field xpath="/gmd:MD_Metadata/gmd:propertyType"/>
          <field xpath="/gmd:MD_Metadata/gmd:featureType"/>
          <field xpath="/gmd:MD_Metadata/gmd:featureAttribute"/>
        </section>
      </tab>

      <!-- Elements that should not use the "flat" mode -->
      <!-- Use excludeFrom attribute to don't apply flat mode exception if the element parent is in that list. For example:
            <for name="gmd:contact" excludeFrom="gmd:MD_MaintenanceInformation"/>

            Applies flat mode exceptions for all gmd:contact, except for the ones in gmd:MD_MaintenanceInformation.
      -->
      <flatModeExceptions>
        <for name="gmd:descriptiveKeywords"/>
        <for name="gmd:keyword"/>
        <for name="gmd:date"/>
        <for name="gmd:geographicElement"/>
        <for name="gmd:spatialResolution"/>
        <for name="gmd:pointOfContact"/>
        <for name="gmd:distributor"/>
        <for name="gmd:distributionFormat"/>
        <for name="gmd:contact"/>
        <for name="gmd:processor"/>
        <for name="gmd:topicCategory"/>
        <for name="srv:parameters"/>
      </flatModeExceptions>

      <!--
      To configure the type of transformations
      or the number of keyword allowed for e
      thesaurus define a specific configuration:

      eg. only 2 INSPIRE themes with Anchor.

      <thesaurusList>
        <thesaurus key="external.theme.httpinspireeceuropaeutheme-theme"
                   maxtags="2"
                   fieldset="false"
                   transformations="to-iso19139-keyword-with-anchor"/>
      </thesaurusList>
      -->

      <thesaurusList>
        <thesaurus key="external.none.allThesaurus"
                   fieldset="false"/>
      </thesaurusList>

    </view>
    <view name="advanced"
          class="gn-label-above-input gn-indent-bluescale">
      <sidePanel>
        <directive data-gn-need-help="creating-metadata"/>

        <directive data-gn-validation-report=""/>

        <directive data-gn-overview-manager=""
                   data-file-types=".png,.gif,.jpeg,.jpg"/>

        <directive data-gn-distribution-resources-panel="gnCurrentEdit.metadata"
                   data-mode="viewConfig.distributionConfig.layout || ''"
                   data-editor-config="default"
                   data-related-config="[{
                                           title: 'API',
                                           filter: 'protocol:OGC:.*|ESRI:.*|atom.*',
                                           editActions: ['addOnlinesrc']},
                                         {
                                           title: 'download',
                                           filter: 'protocol:.*DOWNLOAD.*|DB:.*|FILE:.*',
                                           editActions: ['addOnlinesrc']},
                                         {
                                            title: 'links',
                                            filter:'-protocol:OGC:.*|ESRI:.*|atom.*|.*DOWNLOAD.*|DB:.*|FILE:.* AND -function:legend|featureCatalogue|dataQualityReport',
                                            editActions: ['addOnlinesrc']}]"
        />

        <directive data-gn-onlinesrc-list=""
                   data-types="parent|dataset|service|source|sibling|associated|fcats"/>

        <directive gn-geo-publisher=""
                   data-ng-if="gnCurrentEdit.geoPublisherConfig"
                   data-config="{{gnCurrentEdit.geoPublisherConfig}}"
                   data-lang="lang"/>

        <directive data-gn-suggestion-list=""/>
      </sidePanel>

      <tab id="identificationInfo" default="true">
        <section xpath="/gmd:MD_Metadata/gmd:identificationInfo" or="identificationInfo"
                 in="/gmd:MD_Metadata"/>
      </tab>
      <tab id="distributionInfo">
        <section xpath="/gmd:MD_Metadata/gmd:distributionInfo" or="distributionInfo"
                 in="/gmd:MD_Metadata"/>
      </tab>
      <tab id="dataQualityInfo">
        <section xpath="/gmd:MD_Metadata/gmd:dataQualityInfo" or="dataQualityInfo"
                 in="/gmd:MD_Metadata"/>
      </tab>
      <tab id="spatialRepresentationInfo">
        <section xpath="/gmd:MD_Metadata/gmd:spatialRepresentationInfo"
                 or="spatialRepresentationInfo" in="/gmd:MD_Metadata"/>
      </tab>
      <tab id="referenceSystemInfo">
        <section xpath="/gmd:MD_Metadata/gmd:referenceSystemInfo" or="referenceSystemInfo"
                 in="/gmd:MD_Metadata"/>
      </tab>
      <tab id="contentInfo" toggle="true">
        <section xpath="/gmd:MD_Metadata/gmd:contentInfo" or="contentInfo" in="/gmd:MD_Metadata"/>
      </tab>
      <tab id="portrayalCatalogueInfo" toggle="true">
        <section xpath="/gmd:MD_Metadata/gmd:portrayalCatalogueInfo" or="portrayalCatalogueInfo"
                 in="/gmd:MD_Metadata"/>
      </tab>
      <tab id="metadata">
        <section name="metadata">
          <field xpath="/gmd:MD_Metadata/gmd:fileIdentifier"/>
          <field xpath="/gmd:MD_Metadata/gmd:language" or="language" in="/gmd:MD_Metadata"/>
          <field xpath="/gmd:MD_Metadata/gmd:locale" or="locale" in="/gmd:MD_Metadata"/>
          <field xpath="/gmd:MD_Metadata/gmd:characterSet"/>
          <field xpath="/gmd:MD_Metadata/gmd:parentIdentifier" or="parentIdentifier"
                 in="/gmd:MD_Metadata"/>
          <field xpath="/gmd:MD_Metadata/gmd:hierarchyLevel" or="hierarchyLevel"
                 in="/gmd:MD_Metadata"/>
          <field xpath="/gmd:MD_Metadata/gmd:hierarchyLevelName" or="hierarchyLevelName"
                 in="/gmd:MD_Metadata"/>
          <field xpath="/gmd:MD_Metadata/gmd:dateStamp"/>
          <field xpath="/gmd:MD_Metadata/gmd:metadataStandardName"/>
          <field xpath="/gmd:MD_Metadata/gmd:metadataStandardVersion"/>
          <field xpath="/gmd:MD_Metadata/gmd:contact" or="contact" in="/gmd:MD_Metadata"/>
          <field xpath="/gmd:MD_Metadata/gmd:dataSetURI" or="dataSetURI" in="/gmd:MD_Metadata"/>
          <field xpath="/gmd:MD_Metadata/gmd:series"/>
          <field xpath="/gmd:MD_Metadata/gmd:describes"/>
          <field xpath="/gmd:MD_Metadata/gmd:propertyType"/>
          <field xpath="/gmd:MD_Metadata/gmd:featureType"/>
          <field xpath="/gmd:MD_Metadata/gmd:featureAttribute"/>
        </section>
      </tab>
      <tab id="metadataConstraints" toggle="true">
        <section xpath="/gmd:MD_Metadata/gmd:metadataConstraints" or="metadataConstraints"
                 in="/gmd:MD_Metadata"/>
      </tab>
      <tab id="metadataMaintenance" toggle="true">
        <section xpath="/gmd:MD_Metadata/gmd:metadataMaintenance" or="metadataMaintenance"
                 in="/gmd:MD_Metadata"/>
      </tab>
      <tab id="applicationSchemaInfo" toggle="true">
        <section xpath="/gmd:MD_Metadata/gmd:applicationSchemaInfo" or="applicationSchemaInfo"
                 in="/gmd:MD_Metadata"/>
      </tab>
    </view>
    <view name="xml">
      <sidePanel>
        <directive data-gn-need-help="creating-metadata"/>

        <directive data-gn-validation-report=""/>

        <directive data-gn-overview-manager=""
                   data-file-types=".png,.gif,.jpeg,.jpg"/>

        <directive data-gn-distribution-resources-panel="gnCurrentEdit.metadata"
                   data-mode="viewConfig.distributionConfig.layout || ''"
                   data-editor-config="default"
                   data-related-config="[{
                                           title: 'API',
                                           filter: 'protocol:OGC:.*|ESRI:.*|atom.*',
                                           editActions: ['addOnlinesrc']},
                                         {
                                           title: 'download',
                                           filter: 'protocol:.*DOWNLOAD.*|DB:.*|FILE:.*',
                                           editActions: ['addOnlinesrc']},
                                         {
                                            title: 'links',
                                            filter:'-protocol:OGC:.*|ESRI:.*|atom.*|.*DOWNLOAD.*|DB:.*|FILE:.* AND -function:legend|featureCatalogue|dataQualityReport',
                                            editActions: ['addOnlinesrc']}]"
        />

        <directive data-gn-onlinesrc-list=""
                   data-types="parent|dataset|service|source|sibling|associated|fcats"/>

        <directive gn-geo-publisher=""
                   data-ng-if="gnCurrentEdit.geoPublisherConfig"
                   data-config="{{gnCurrentEdit.geoPublisherConfig}}"
                   data-lang="lang"/>

        <directive data-gn-suggestion-list=""/>
      </sidePanel>
      <tab id="xml" default="true"/>
    </view>
  </views>
  <batchEditing>
    <section name="identification">
      <!-- Update existing title in metadata record -->
      <field name="title"
             xpath="gmd:identificationInfo/*/gmd:citation/*/gmd:title"
             insertMode="gn_replace"
             indexField="title">
        <template><![CDATA[<gco:CharacterString xmlns:gco='http://www.isotc211.org/2005/gco'>{{value}}</gco:CharacterString>]]></template>
      </field>

      <!-- Insert a new keyword in the first gmd:descriptiveKeywords found.
      Warning: The section may contains a thesaurusName reference and
      the keyword may not be part of it.
      Warning: Duplicates may be inserted.
      -->
      <field name="keyword"
             xpath="gmd:identificationInfo/gmd:MD_DataIdentification/
                      gmd:descriptiveKeywords/gmd:MD_Keywords/gmd:keyword"
             indexField="keyword"
             insertMode="gn_create">
        <template>
          <![CDATA[<gco:CharacterString xmlns:gco='http://www.isotc211.org/2005/gco'>{{value}}</gco:CharacterString>]]></template>
      </field>

      <field name="status"
             xpath="gmd:identificationInfo/*/
                      gmd:status"
             use="data-gn-codelist-picker"
             codelist="gmd:MD_ProgressCode"
             indexField="cl_status"
             insertMode="gn_replace">
        <template>
          <![CDATA[<gmd:MD_ProgressCode xmlns:gmd='http://www.isotc211.org/2005/gmd' codeListValue='{{value}}'/>]]></template>
      </field>


      <!-- Insert a new topic category
      Warning: Duplicates may be inserted.
      -->
      <field name="topicCats"
             xpath="gmd:identificationInfo/*/
                      gmd:topicCategory"
             use="data-gn-codelist-picker"
             codelist="gmd:MD_TopicCategoryCode"
             indexField="topicCat"
             insertMode="gn_create">
        <template>
          <![CDATA[<gmd:MD_TopicCategoryCode xmlns:gmd='http://www.isotc211.org/2005/gmd'>{{value}}</gmd:MD_TopicCategoryCode>]]></template>
      </field>

      <!-- Insert a new extent
      Warning: Duplicates may be inserted.
      -->
      <field name="extent"
             xpath="gmd:identificationInfo/gmd:MD_DataIdentification/gmd:extent"
             use="data-gn-draw-bbox"
             insertMode="gn_create"/>

      <!-- Insert a new resource language
      Warning: Duplicates may be inserted.
      -->
      <field name="language"
             xpath="gmd:identificationInfo/*/
                      gmd:language"
             use="data-gn-language-picker"
             insertMode="gn_replace"
             removable="true">
        <template>
          <![CDATA[<gmd:LanguageCode xmlns:gmd='http://www.isotc211.org/2005/gmd' codeListValue='{{value}}'/>]]></template>
      </field>

      <!-- Insert, or replace if existing, the parent identifier.
      Warning: Duplicates may be inserted.
      -->
      <field name="parentIdentifier"
             xpath="gmd:parentIdentifier"
             use="data-gn-metadata-picker"
             insertMode="gn_replace"
             removable="true">
        <template>
          <![CDATA[<gco:CharacterString xmlns:gco='http://www.isotc211.org/2005/gco'>{{value}}</gco:CharacterString>]]></template>
      </field>

      <field name="resourceStatus"
             xpath="gmd:identificationInfo/*/
                      gmd:status"
             use="data-gn-codelist-picker"
             codelist="gmd:MD_ProgressCode"
             insertMode="gn_replace"
             removable="true">
        <template>
          <![CDATA[<gmd:MD_ProgressCode xmlns:gmd='http://www.isotc211.org/2005/gmd' codeListValue='{{value}}'/>]]></template>
      </field>
    </section>

    <section name="resourceConstraints">
      <!-- Insert a new access contraints
            Warning: Duplicates may be inserted.
      -->
      <field name="legalConstraints"
             xpath="gmd:identificationInfo/*/
                      gmd:resourceConstraints/gmd:MD_LegalConstraints/
                        gmd:accessConstraints"
             use="data-gn-codelist-picker"
             codelist="gmd:MD_RestrictionCode"
             insertMode="gn_create"
             removable="true">
        <template>
          <![CDATA[<gmd:MD_RestrictionCode xmlns:gmd='http://www.isotc211.org/2005/gmd' codeListValue='{{value}}'/>]]></template>
      </field>

      <!-- Insert a new other contraints
            Warning: Duplicates may be inserted.
      -->
      <field name="otherConstraints"
             xpath="gmd:identificationInfo/*/
                      gmd:resourceConstraints/gmd:MD_LegalConstraints/
                        gmd:otherConstraints"
             use="textarea"
             insertMode="gn_create"
             removable="true">
        <template>
          <![CDATA[<gco:CharacterString xmlns:gco='http://www.isotc211.org/2005/gco'>{{value}}</gco:CharacterString>]]></template>
      </field>
    </section>


    <!-- Replace current lineage or insert a new one.
          Warning: Duplicates may be inserted.
    -->
    <section name="quality">
      <field name="lineage"
             xpath="gmd:dataQualityInfo/gmd:DQ_DataQuality/
                      gmd:lineage/gmd:LI_Lineage/gmd:statement"
             use="textarea"
             insertMode="gn_replace"
             removable="true">
        <template>
          <![CDATA[<gco:CharacterString xmlns:gco='http://www.isotc211.org/2005/gco'>{{value}}</gco:CharacterString>]]></template>
      </field>
    </section>

    <section name="contact">
      <field name="resourceContact"
             xpath="gmd:identificationInfo/gmd:MD_DataIdentification/gmd:pointOfContact"
             use="data-gn-directory-entry-selector"
             insertMode="gn_create"/>
      <field name="distributor"
             xpath="gmd:distributionInfo/gmd:MD_Distribution/gmd:distributor/gmd:MD_Distributor/gmd:distributorContact"
             use="data-gn-directory-entry-selector"
             insertMode="gn_create"/>
      <field name="mdContact"
             xpath="gmd:contact"
             use="data-gn-directory-entry-selector"
             insertMode="gn_create"/>
    </section>

    <section name="metadata">
      <field name="mdLanguage"
             xpath="gmd:language"
             use="data-gn-language-picker"
             removable="true">
        <template>
          <![CDATA[<gmd:LanguageCode xmlns:gmd='http://www.isotc211.org/2005/gmd' codeListValue='{{value}}'/>]]></template>
      </field>
    </section>
  </batchEditing>
</editor>
